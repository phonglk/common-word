{"version":3,"sources":["webpack:///webpack/bootstrap dee1dfa0b054196f6020","webpack:///./src/common/log.js","webpack:///./src/common/storage.js","webpack:///./src/const/style.js","webpack:///./src/common/communication.js","webpack:///./src/const/event.js","webpack:///delegated ./node_modules/react/react.js from dll-reference standard","webpack:///external \"standard\"","webpack:///./src/common/word-storage.js","webpack:///./src/content/mounting.js","webpack:///./src/content/event-handlers.js","webpack:///./src/content/window-helper.js","webpack:///./src/content/style.less","webpack:///./~/findandreplacedomtext/src/findAndReplaceDOMText.js","webpack:///delegated ./node_modules/lodash/lodash.js from dll-reference standard","webpack:///./src/content/actions.js","webpack:///./src/content/sidebar.component.jsx","webpack:///./src/content/toolbar.component.jsx","webpack:///delegated ./node_modules/react-dom/index.js from dll-reference standard","webpack:///./src/content/index.js"],"names":["log","info","warn","error","getConsole","args","console","obj","storage","Promise","resolve","reject","chrome","set","e","_set","get","items","_get","key","value","updatedItems","Object","assign","getSync","setSync","getLocal","setLocal","THRESHOLD_TOOLBAR_SHOW","THRESHOLD_TOOLBAR_PROGRESS_SHOW","CLASS_PREFIX","pre","a","CLASS_WORD","CLASS_UNKNOWN_WORD","CLASS_KNOWN_WORD","CLASS_TOOL_ADD_TO_KNOWN_LIST","CLASS_TOOLBAR_MOUNT_DIV","CLASS_PROGRESS_TO_SHOW_TOOLBAR","CLASS_SIDEBAR_WRAP","CLASS_SIDEBAR_WORDLIST","CLASS_SIDEBAR_KNOWN_WORD","CLASS_SIDEBAR_TOOLBAR","PROP_WORD","msg","extension","sendMessage","params","sendMessageToTab","addMessageListener","tabId","tabs","listener","runtime","onMessage","addListener","INIT_IN_PAGE_CONNECTION","EVENT_BROWSER_ACTION_CLICK","knownList","selectedWordList","list","getKnownList","word","find","entry","newEntry","date","Date","getTime","sentence","push","updateKnownWord","bindToolbar","mountSideBar","removeToolbar","targetNode","event","wordListMap","actions","mountNode","document","createElement","classList","add","appendChild","render","window","top","__cw__words","__cw__words_count","body","querySelector","unmountComponentAtNode","remove","mouseenterHandler","mouseleaveHandler","replacementNode","target","contains","clearTimeout","attributes","leaveTO","enterTO","isToolbarShow","setTimeout","bind","isTopWindow","getTopWindow","isZeroIframe","innerWidth","innerHeight","updateKnownWordStorage","querySelectorAll","forEach","node","hideToolbar","hideWord","actionUpdateKnownWord","showToolbar","showProgressBar","removeProgressBar","progressNode","append","sortWordList","sortBy","dir","indexOf","Error","sortFunc","b","slice","sort","SideBar","Component","constructor","props","__cw__addWord","addWord","checkboxChange","state","words","sortDir","hideKnown","tempState","lastUpdate","updateTO","shouldComponentUpdate","nextProps","nextState","_","isEqual","wordObj","newObj","count","setState","sortedList","filteredList","filter","isKnown","sortByRank","sortByCount","map","w","rank","Toolbar","clickKnown","meta","wordListRegExp","preset","replace","s","text","toLowerCase","isUndefined","textNode","createTextNode","knownListMap","setAttribute","addEventListener","filterElements","NON_PROSE_ELEMENTS","el","nodeName","className","highlight","location","href","type","isTop","active","nerverHappen","require","sender","sendResponse","wordList"],"mappings":"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CAAhC;AAED,C;;;;;;;;;;;;QCjCe8B,W,GAAAA,W;QAIAC,Y,GAAAA,Y;QAIAC,Y,GAAAA,Y;AART,SAASF,WAAT,GAAuB;AAC5B,SAAOpB,WAAWA,OAAOC,GAAzB;AACD;;AAEM,SAASoB,YAAT,GAAwB;AAC7B,SAAOrB,OAAOC,GAAd;AACD;;AAEM,SAASqB,YAAT,GAAwB;AAC7B,SAAOtB,OAAOuB,UAAP,KAAsB,CAAtB,IAA2BvB,OAAOwB,WAAP,KAAuB,CAAzD;AACD,C;;;;;;ACVD,yC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AAAA;AAAA;AAAA;AAAA;AACA,MAAM;AACN;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA,gBAAgB;;AAEhB;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,OAAO;AACnB,YAAY,eAAe;AAC3B,YAAY,OAAO;AACnB,YAAY,gBAAgB;AAC5B,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,+CAA+C,OAAO;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kDAAkD;AAClD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,IAAI;AACJ;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;ACvnBD,+C;;;;;;;;;;;;;;;;+BCWA,WAAsC,EAAEhD,IAAF,EAAtC,EAAgD;AAC9C,UAAMJ,YAAY,MAAM,sBAAQ,WAAR,CAAxB;AACA,UAAMC,mBAAmB,MAAM,sBAAQ,kBAAR,CAA/B;AACA,UAAMC,OAAOF,UAAUC,gBAAV,CAAb;AACA,QAAIC,IAAJ,EAAU;AACR,UAAI,CAACA,KAAKG,IAAL,CAAU;AAAA,eAASC,MAAMF,IAAN,KAAeA,IAAxB;AAAA,OAAV,CAAL,EAA8C;AAC5C,cAAMG,WAAW,EAAEH,IAAF,EAAQI,MAAM,IAAIC,IAAJ,GAAWC,OAAX,EAAd,EAAoCC,UAAU,EAA9C,EAAjB;AACAT,aAAKU,IAAL,CAAUL,QAAV;AACA,cAAM,sBAAQ,WAAR,EAAqB3C,OAAOC,MAAP,CAAc,EAAd,EAAkBmC,SAAlB,EAA6B;AACtD,WAACC,gBAAD,GAAoBC;AADkC,SAA7B,CAArB,CAAN;AAGA,uBAAM,OAAME,IAAK,gBAAjB;AACD;AACF;AACF,G;;kBAdciD,sB;;;;;;gCAsBR,WAAwB,EAAEjD,IAAF,EAAQa,UAAR,EAAxB,EAA8C;AACnD,UAAMoC,uBAAuB,EAAEjD,IAAF,EAAvB,CAAN;AACA,KAAC,GAAGkB,SAASgC,gBAAT,CAA2B,IAAD,iBAAe,IAAf,gBAA4B,KAAIlD,IAAK,IAA/D,CAAJ,EAAyEmD,OAAzE,CAAiF,UAACC,IAAD,EAAU;AACzFA,WAAKhC,SAAL,CAAeW,MAAf;AACAqB,WAAKhC,SAAL,CAAeC,GAAf;AACD,KAHD;AAIAgC,gBAAY,EAAExC,UAAF,EAAZ;AACD,G;;kBAPqByC,Q;;;;;QANND,W,GAAAA,W;QAeAE,qB,GAAAA,qB;QAKAC,W,GAAAA,W;QAQAC,e,GAAAA,e;QASAC,iB,GAAAA,iB;;AAhEhB;;AACA;;AACA;;AACA;;;;AAwBO,SAASL,WAAT,CAAqB,EAAExC,UAAF,EAArB,EAAqC;AAC1CrE,UAAQN,GAAR,CAAY,OAAZ;AACA,SAAO2E,WAAWyB,UAAX,CAAsBG,aAA7B,CAF0C,CAEE;AAC5C,+BAAc,EAAE5B,UAAF,EAAd;AACD;;AAWM,SAAS0C,qBAAT,CAA+B,EAAEvD,IAAF,EAAQa,UAAR,EAA/B,EAAqD;AAC1DyC,WAAS,EAAEtD,IAAF,EAAQa,UAAR,EAAT;AACA,iBAAM,SAAQb,IAAK,EAAnB;AACD;;AAEM,SAASwD,WAAT,CAAqB,EAAExD,IAAF,EAAQa,UAAR,EAAoBC,KAApB,EAA2BC,WAA3B,EAArB,EAA+D;AACpEvE,UAAQN,GAAR,CAAY,MAAZ;AACA2E,aAAWyB,UAAX,CAAsBG,aAAtB,GAAsC,IAAtC,CAFoE,CAExB;AAC5C,6BAAY,EAAEzC,IAAF,EAAQa,UAAR,EAAoBC,KAApB,EAA2BC,WAA3B,EAAZ,EAAsD;AACpDwC,2BAAuBA,sBAAsBZ,IAAtB,CAA2B,IAA3B,EAAiC,EAAE3C,IAAF,EAAQa,UAAR,EAAjC;AAD6B,GAAtD;AAGD;;AAEM,SAAS4C,eAAT,CAAyB,EAAE5C,UAAF,EAAzB,EAAyC;AAC9C,MAAI8C,eAAe9C,WAAWgB,aAAX,CAA0B,IAAD,qCAAmC,EAA5D,CAAnB;AACA,MAAI,CAAC8B,YAAL,EAAmB;AACjBA,mBAAezC,SAASC,aAAT,CAAuB,KAAvB,CAAf;AACAwC,iBAAavC,SAAb,CAAuBC,GAAvB;AACAR,eAAW+C,MAAX,CAAkBD,YAAlB;AACD;AACF;;AAEM,SAASD,iBAAT,CAA2B,EAAE7C,UAAF,EAA3B,EAA2C;AAChD,QAAM8C,eAAe9C,WAAWgB,aAAX,CAA0B,IAAD,qCAAmC,EAA5D,CAArB;AACA,MAAI8B,YAAJ,EAAkBA,aAAa5B,MAAb;AACnB,C;;;;;;;;;;;;;;;ACnED;;;;AACA;;AACA;;AACA;;;;AAOA,SAAS8B,YAAT,CAAsB/D,IAAtB,EAA4BgE,MAA5B,EAAoCC,MAAM,MAA1C,EAAkD;AAChD,MAAI,CAAC,MAAD,EAAS,OAAT,EAAkBC,OAAlB,CAA0BF,MAA1B,MAAsC,CAAC,CAA3C,EAA8C,MAAM,IAAIG,KAAJ,CAAW,UAASH,MAAO,mBAA3B,CAAN;AAC9C,QAAMI,WAAWH,QAAQ,MAAR,GACL,UAACI,CAAD,EAAIjG,CAAJ;AAAA,WAAUA,EAAE4F,MAAF,IAAYK,EAAEL,MAAF,CAAtB;AAAA,GADK,GAEL,UAAC5F,CAAD,EAAIiG,CAAJ;AAAA,WAAUjG,EAAE4F,MAAF,IAAYK,EAAEL,MAAF,CAAtB;AAAA,GAFZ;AAGA,SAAOhE,KAAKsE,KAAL,GAAaC,IAAb,CAAkBH,QAAlB,CAAP;AACD;;AAEc,MAAMI,OAAN,SAAsB,gBAAMC,SAA5B,CAAsC;AACnDC,cAAYC,KAAZ,EAAmB;AACjB,UAAMA,KAAN;AACA,mBAAK,eAAL;AACA,SAAKA,KAAL,CAAWjD,MAAX,CAAkBkD,aAAlB,GAAkC,KAAKC,OAAL,CAAahC,IAAb,CAAkB,IAAlB,CAAlC;AACA,SAAKiC,cAAL,GAAsB,KAAKA,cAAL,CAAoBjC,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKkC,KAAL,GAAa;AACXC,aAAO,EADI;AAEXT,YAAM,MAFK;AAGXU,eAAS,KAHE;AAIXC,iBAAW;AAJA,KAAb;AAMA,SAAKC,SAAL,GAAiB;AACfH,aAAO,EADQ;AAEfI,kBAAY,IAAI7E,IAAJ,EAFG;AAGf8E,gBAAU;AAHK,KAAjB;AAKD;;AAEDC,wBAAsBC,SAAtB,EAAiCC,SAAjC,EAA4C;AAC1C,WAAO,CAACC,EAAEC,OAAF,CAAUF,UAAUR,KAApB,EAA2B,KAAKD,KAAL,CAAWC,KAAtC,CAAD,IACC,CAACS,EAAEC,OAAF,CAAUF,UAAUjB,IAApB,EAA0B,KAAKQ,KAAL,CAAWR,IAArC,CADF,IAEC,CAACkB,EAAEC,OAAF,CAAUF,UAAUxB,MAApB,EAA4B,KAAKe,KAAL,CAAWf,MAAvC,CAFF,IAGC,CAACyB,EAAEC,OAAF,CAAUF,UAAUN,SAApB,EAA+B,KAAKH,KAAL,CAAWG,SAA1C,CAHT;AAID;;AAEDL,UAAQc,OAAR,EAAiB;AAAA;;AACf,UAAMX,QAAQ,KAAKG,SAAL,CAAeH,KAA7B;AACA,UAAM5E,QAAQ4E,MAAM7E,IAAN,CAAW;AAAA,aAAKjD,EAAEgD,IAAF,KAAWyF,QAAQzF,IAAxB;AAAA,KAAX,CAAd;AACA,QAAI,CAACE,KAAL,EAAY;AACV,YAAMwF,sBAAcD,OAAd,IAAuBE,OAAO,CAA9B,GAAN;AACAb,YAAMtE,IAAN,CAAWkF,MAAX;AACD,KAHD,MAGO;AACLxF,YAAMyF,KAAN,IAAe,CAAf;AACD;AACD;AACA,QAAI,IAAItF,IAAJ,GAAWC,OAAX,KAAuB,KAAK2E,SAAL,CAAeC,UAAtC,GAAmD,GAAvD,EAA4D;AAC1D,WAAKU,QAAL,CAAc,EAAEd,KAAF,EAAd;AACA,WAAKG,SAAL,CAAeC,UAAf,GAA4B,IAAI7E,IAAJ,GAAWC,OAAX,EAA5B;AACA+B,mBAAa,KAAK4C,SAAL,CAAeE,QAA5B;AACD,KAJD,MAIO;AACL,WAAKF,SAAL,CAAeE,QAAf,GAA0BzC,WAAW,YAAM;AACzC,cAAKkD,QAAL,CAAc,EAAEd,KAAF,EAAd;AACD,OAFyB,EAEvB,IAFuB,CAA1B;AAGD;AACF;;AAEDF,mBAAiB;AACf,SAAKgB,QAAL,CAAc,EAAEZ,WAAW,CAAC,KAAKH,KAAL,CAAWG,SAAzB,EAAd;AACD;;AAEDzD,WAAS;AAAA;;AACP;AACA,UAAMuD,QAAQ,KAAKD,KAAL,CAAWC,KAAzB;AACA,UAAMe,aAAahC,aAAaiB,KAAb,EAAoB,KAAKD,KAAL,CAAWR,IAA/B,EAAqC,KAAKQ,KAAL,CAAWE,OAAhD,CAAnB;AACA,UAAMe,eAAe,KAAKjB,KAAL,CAAWG,SAAX,GACDa,WAAWE,MAAX,CAAkB;AAAA,aAAQ,CAAC/F,KAAKgG,OAAd;AAAA,KAAlB,CADC,GAC0CH,UAD/D;AAEA,UAAMI,aAAa,SAAbA,UAAa;AAAA,aAAM,OAAKL,QAAL,CAAc,EAAEvB,MAAM,MAAR,EAAgBU,SAAS,KAAzB,EAAd,CAAN;AAAA,KAAnB;AACA,UAAMmB,cAAc,SAAdA,WAAc;AAAA,aAAM,OAAKN,QAAL,CAAc,EAAEvB,MAAM,OAAR,EAAiBU,SAAS,MAA1B,EAAd,CAAN;AAAA,KAApB;AACA,mBAAK,QAAL;AACA,WACE;AAAA;AAAA,QAAK,oCAAL;AACE;AAAA;AAAA,UAAK,uCAAL;AAAA;AAEE;AAAA;AAAA,YAAG,MAAK,OAAR,EAAgB,SAASkB,UAAzB,EAAqC,WAAW,KAAKpB,KAAL,CAAWR,IAAX,KAAoB,MAApB,GAA6B,UAA7B,GAA0C,IAA1F;AAAA;AAAA,SAFF;AAGE;AAAA;AAAA,YAAG,MAAK,QAAR,EAAiB,SAAS6B,WAA1B,EAAuC,WAAW,KAAKrB,KAAL,CAAWR,IAAX,KAAoB,OAApB,GAA8B,UAA9B,GAA2C,IAA7F;AAAA;AAAA,SAHF;AAAA;AAKE;AAAA;AAAA;AACE,mDAAO,MAAK,UAAZ,EAAuB,SAAS,KAAKQ,KAAL,CAAWG,SAA3C,EAAsD,UAAU,KAAKJ,cAArE,GADF;AAAA;AAAA;AALF,OADF;AAWE;AAAA;AAAA,UAAK,wCAAL;AACGkB,qBAAaK,GAAb,CAAiB;AAAA,iBAAM;AAAA;AAAA,cAAK,KAAKC,EAAEC,IAAZ,EAAkB,WAAWD,EAAEJ,OAAF,qCAAuC,EAApE;AACrBI,cAAEpG,IADmB;AAAA;AACXoG,cAAEC,IADS;AAAA;AACAD,cAAET,KADF;AAAA;AAAA,WAAN;AAAA,SAAjB;AADH;AAXF,KADF;AAmBD;AA/EkD;kBAAhCrB,O;;;;;;;;;;;;;AClBrB;;;;;;AAEe,MAAMgC,OAAN,SAAsB,gBAAM/B,SAA5B,CAAsC;AACnDC,cAAYC,KAAZ,EAAmB;AACjB,UAAMA,KAAN;AACA,SAAK8B,UAAL,GAAkB,KAAKA,UAAL,CAAgB5D,IAAhB,CAAqB,IAArB,CAAlB;AACD;AACD4D,eAAa;AACX/J,YAAQN,GAAR,CAAY,KAAKuI,KAAjB;AACA,SAAKA,KAAL,CAAWzD,OAAX,CAAmBuC,qBAAnB,CAAyC,KAAKkB,KAAL,CAAWzE,IAApD;AACD;AACDuB,WAAS;AACP;AACA,WACE;AAAA;AAAA;AACG,WAAKkD,KAAL,CAAW+B,IAAX,GAAmB,IAAG,KAAK/B,KAAL,CAAW+B,IAAX,CAAgBH,IAAK,GAA3C,GAAgD,EADnD;AAEE;AAAA;AAAA,UAAM,SAAN,EAAU,SAAS,KAAKE,UAAxB;AAAA;AAAA,OAFF;AAGE;AAAA;AAAA,UAAM,SAAN,EAAU,cAAV,EAAmB,OAAM,kCAAzB;AAAA;AAAA,OAHF;AAIE;AAAA;AAAA,UAAM,SAAN,EAAU,cAAV,EAAmB,OAAM,kCAAzB;AAAA;AAAA;AAJF,KADF;AAQD;AAnBkD;kBAAhCD,O;;;;;;;;;;;ACFrB,8C;;;;;;;;;;;;;+BCsCA,aAA2B;AACzB,QAAIX,QAAQ,CAAZ;AACA,yCAAsBzE,SAASU,IAA/B,EAAqC;AACnC3B,YAAMwG,cAD6B;AAEnCC,cAAQ,OAF2B;AAGnCC,eAAS,iBAACC,CAAD,EAAO;AACd,cAAM5G,OAAO4G,EAAEC,IAAF,CAAOC,WAAP,EAAb;AACA,YAAI,iBAAEC,WAAF,CAAchG,YAAYf,IAAZ,CAAd,CAAJ,EAAsC,OAAO4G,EAAEC,IAAT;AACtClB,iBAAS,CAAT;AACA,cAAMzD,kBAAkBhB,SAASC,aAAT,CAAuB,MAAvB,CAAxB;AACA,cAAM6F,WAAW9F,SAAS+F,cAAT,CAAwBL,EAAEC,IAA1B,CAAjB;AACA3E,wBAAgBZ,WAAhB,CAA4B0F,QAA5B;AACA9E,wBAAgBd,SAAhB,CAA0BC,GAA1B;AACA,YAAI6F,aAAalH,IAAb,CAAJ,EAAwB;AACtBkC,0BAAgBd,SAAhB,CAA0BC,GAA1B;AACD,SAFD,MAEO;AACLa,0BAAgBd,SAAhB,CAA0BC,GAA1B;AACD;AACDa,wBAAgBiF,YAAhB,mBAAwCnH,IAAxC;;AAEAkC,wBAAgBkF,gBAAhB,CAAiC,YAAjC,EAA+C,iCAAkBzE,IAAlB,CAC7C,EAAE5B,WAAF,EAD6C,EAC5Bf,IAD4B,EACtBkC,eADsB,CAA/C;AAEAA,wBAAgBkF,gBAAhB,CAAiC,YAAjC,EAA+C,iCAAkBzE,IAAlB,CAAuB,IAAvB,EAA6B3C,IAA7B,EAAmCkC,eAAnC,CAA/C;AACAV,eAAOC,GAAP,CAAWiD,aAAX,cACK3D,YAAYf,IAAZ,CADL;AAEEgG,mBAAS,CAAC,iBAAEe,WAAF,CAAcG,aAAalH,IAAb,CAAd;AAFZ;AAIA,eAAOkC,eAAP;AACD,OA1BkC;AA2BnCmF,sBAAiB;AAAA,eACbC,mBAAmBtD,OAAnB,CAA2BuD,GAAGC,QAAH,CAAYV,WAAZ,EAA3B,MAA0D,CAAC,CAA3D,IACAS,GAAGE,SAAH,8BAFa;AAAA;AA3BkB,KAArC;AA+BA,mBAAM,WAAU9B,KAAM,QAAtB;AACD,G;;kBAlCc+B,S;;;;;;gCAoCf,WAAsBzI,MAAtB,EAA8B;AAC5B,mBAAK,QAAL,EAAeuC,OAAOmG,QAAP,CAAgBC,IAA/B;AACA,QAAI,gCAAJ,EAAmB;AACjB;AACA,sCAAY;AACVC,oDADU;AAEVC,eAAO;AAFG,OAAZ;AAID,KAND,MAMO,IAAI,iCAAJ,EAAoB;AACzB,qBAAK,wCAAL;AACA;AACD,KAHM,MAGA;AACL;AACA,sCAAY;AACVD;AADU,OAAZ;AAGD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACD,G;;kBA/BcE,M;;;;;AA1Ef;;;;AACA;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AAGA;;AAGA;;;;;AAfA;;;AAuBA,SAASC,YAAT,GAAwB;AACtBC,EAAA,mBAAAA,CAAQ,EAAR;AACD;;AAED/G,SAASkG,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM,CAEnD,CAFD;;AAKA,MAAMF,eAAe,EAArB;AACA,MAAMnG,cAAc,EAApB;AACA,IAAI0F,iBAAiB,IAArB;AACA,MAAMa,qBAAqB,CAAC,IAAD,EAAO,IAAP,EAAa,QAAb,EAAuB,UAAvB,EAAmC,OAAnC,EAA4C,KAA5C,EAAmD,OAAnD,EAA4D,OAA5D,EAAqE,QAArE,EAA+E,KAA/E,EAAsF,KAAtF,EAA6F,QAA7F,EAAuG,OAAvG,EAAgH,UAAhH,EAA4H,QAA5H,EAAsI,QAAtI,EAAgJ,UAAhJ,EAA4J,QAA5J,CAA3B;;;AAsEA,SAAS7H,WAAT,GAAuB;AACrB,yCAAmB,UAACX,GAAD,EAAMoJ,MAAN,EAAcC,YAAd,EAA+B;AAChD,QAAIrJ,IAAIgC,KAAJ,IAAahC,IAAIgC,KAAJ,sCAAjB,EAA2D;AACzD,YAAMsH,WAAWtJ,IAAIsJ,QAArB;AACAL,aAAO,EAAEK,QAAF,EAAP;AACD;AACDD,iBAAa,EAAb;AACD,GAND;AAOD;;AAED1I;;AAEA,eAAK,YAAL,E","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dee1dfa0b054196f6020","/* eslint-disable no-console */\nexport default function log(...args) {\n  console.log(...args);\n}\n\nexport function info(...args) {\n  console.info(...args);\n}\n\nexport function warn(...args) {\n  console.warn(...args);\n}\n\nexport function error(...args) {\n  console.error(...args);\n}\n\nexport function getConsole() {\n  return console;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/log.js","/* eslint-disable no-underscore-dangle */\n\nasync function _set(obj, storage = 'sync') {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.storage[storage].set(obj, () => {\n        resolve();\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nasync function _get(obj = null, storage = 'sync') {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.storage[storage].get((items) => {\n        resolve(items);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nasync function get(key, storage) {\n  try {\n    const items = await _get(null, storage);\n    return items[key];\n  } catch (e) {\n    return null;\n  }\n}\n\nasync function set(key, value, storage) {\n  const items = await _get(null, storage)\n  const updatedItems = Object.assign({}, items, {\n    [key]: value,\n  });\n  await _set(updatedItems, storage);\n  return true;\n}\n\nfunction getSync(key) {\n  return get(key, 'sync');\n}\n\nfunction setSync(key, value) {\n  return set(key, value, 'sync');\n}\n\nfunction getLocal(key) {\n  return get(key, 'local');\n}\n\nfunction setLocal(key, value) {\n  return set(key, value, 'local');\n}\n\nexport {\n  getSync,\n  setSync,\n  getLocal,\n  setLocal,\n  _set,\n  _get,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/storage.js","export const THRESHOLD_TOOLBAR_SHOW = 800;\nexport const THRESHOLD_TOOLBAR_PROGRESS_SHOW = 51;\n\nconst CLASS_PREFIX = 'extension-cw--';\nconst pre = a => CLASS_PREFIX + a;\n\nexport const CLASS_WORD = pre('word');\nexport const CLASS_UNKNOWN_WORD = pre('word--unknown');\nexport const CLASS_KNOWN_WORD = pre('word--known');\n\nexport const CLASS_TOOL_ADD_TO_KNOWN_LIST = pre('tool--known');\nexport const CLASS_TOOLBAR_MOUNT_DIV = pre('tool--div-mount');\nexport const CLASS_PROGRESS_TO_SHOW_TOOLBAR = pre('progress--toolbar-enable');\nexport const CLASS_SIDEBAR_WRAP = pre('sidebar--wrapper');\nexport const CLASS_SIDEBAR_WORDLIST = pre('sidebar--wordlist');\nexport const CLASS_SIDEBAR_KNOWN_WORD = pre('sidebar--known-word');\nexport const CLASS_SIDEBAR_TOOLBAR = pre('sidebar--toolbar');\nexport const PROP_WORD = pre('word');\n\n\n\n// WEBPACK FOOTER //\n// ./src/const/style.js","export async function sendMessage(msg) {\n  return new Promise((resolve) => {\n    chrome.extension.sendMessage(msg, params => resolve(params));\n  });\n}\n\nexport function sendMessageToTab(tabId, msg) {\n  chrome.tabs.sendMessage(tabId, msg);\n}\n\nexport function addMessageListener(listener/* fn(msg, sender, sendResponse) */) {\n  chrome.runtime.onMessage.addListener(listener);\n}\n\nexport const INIT_IN_PAGE_CONNECTION = 'INIT_IN_PAGE_CONNECTION';\n\n\n// WEBPACK FOOTER //\n// ./src/common/communication.js","export const EVENT_BROWSER_ACTION_CLICK = 'EVENT_BROWSER_ACTION_CLICK';\n\n\n// WEBPACK FOOTER //\n// ./src/const/event.js","module.exports = (__webpack_require__(8))(0);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react/react.js from dll-reference standard\n// module id = 7\n// module chunks = 0","module.exports = standard;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"standard\"\n// module id = 8\n// module chunks = 0","import { getSync, setSync } from '../common/storage';\n\nexport async function getKnownList() {\n  const knownList = await getSync('knownList');\n  const selectedWordList = await getSync('selectedWordList');\n  const list = knownList[selectedWordList] || [];\n  return { list, knownList, selectedWordList };\n}\n\nexport async function updateKnownWord({ word }) {\n  const { list, knownList, selectedWordList } = getKnownList();\n  if (!list.find(entry => entry.word === word)) {\n    const newEntry = { word, date: new Date().getTime(), sentence: '' };\n    list.push(newEntry);\n    await setSync('knownList', Object.assign({}, knownList, {\n      [selectedWordList]: list,\n    }));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/word-storage.js","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport Toolbar from './toolbar.component';\nimport SideBar from './sidebar.component';\nimport {\n  CLASS_TOOLBAR_MOUNT_DIV,\n} from '../const/style';\n\n\nexport function bindToolbar({ word, targetNode, event, wordListMap }, actions) {\n  const mountNode = document.createElement('div');\n  mountNode.classList.add(CLASS_TOOLBAR_MOUNT_DIV);\n  targetNode.appendChild(mountNode);\n  ReactDOM.render(<Toolbar word={word} node={targetNode} actions={actions} meta={wordListMap[word]} />, mountNode);\n  return mountNode;\n}\n\nexport function mountSideBar() {\n  window.top.__cw__words = [];\n  window.top.__cw__words_count = 0;\n  const mountNode = document.createElement('div');\n  document.body.appendChild(mountNode);\n  ReactDOM.render(<SideBar window={window.top} />, mountNode);\n  return mountNode;\n}\n\nexport function removeToolbar({ targetNode }) {\n  const mountNode = targetNode.querySelector(`.${CLASS_TOOLBAR_MOUNT_DIV}`);\n  if (mountNode) {\n    ReactDOM.unmountComponentAtNode(mountNode);\n    mountNode.remove();\n    return true;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/mounting.js","import {\n  removeProgressBar,\n  showProgressBar,\n  showToolbar,\n  hideToolbar,\n} from './actions';\n\nimport {\n  THRESHOLD_TOOLBAR_SHOW,\n  CLASS_UNKNOWN_WORD,\n} from '../const/style';\n\nexport function mouseenterHandler(word, replacementNode, event) {\n  const targetNode = event.target;\n  if (targetNode !== replacementNode) return;\n  if (!targetNode.classList.contains(CLASS_UNKNOWN_WORD)) return;\n  clearTimeout(targetNode.attributes.leaveTO);\n  clearTimeout(targetNode.attributes.enterTO);\n  if (targetNode.attributes.isToolbarShow !== true) {\n    showProgressBar({ targetNode });\n  }\n  const wordListMap = this.wordListMap;\n  targetNode.attributes.enterTO = setTimeout(showToolbar.bind(null, { word, targetNode, event, wordListMap })\n                                                                      , THRESHOLD_TOOLBAR_SHOW);\n}\n\nexport function mouseleaveHandler(word, targetNode, event) {\n  if (!targetNode.classList.contains(CLASS_UNKNOWN_WORD)) return;\n  clearTimeout(targetNode.attributes.leaveTO);\n  clearTimeout(targetNode.attributes.enterTO);\n  removeProgressBar({ targetNode });\n  targetNode.attributes.leaveTO = setTimeout(hideToolbar.bind(null, { word, targetNode, event })\n                                                                                        , 1000);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/event-handlers.js","export function isTopWindow() {\n  return window === window.top;\n}\n\nexport function getTopWindow() {\n  return window.top;\n}\n\nexport function isZeroIframe() {\n  return window.innerWidth === 0 && window.innerHeight === 0;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/content/window-helper.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/style.less\n// module id = 16\n// module chunks = 0","/**\n * findAndReplaceDOMText v 0.4.5\n * @author James Padolsey http://james.padolsey.com\n * @license http://unlicense.org/UNLICENSE\n *\n * Matches the text of a DOM node against a regular expression\n * and replaces each match (or node-separated portions of the match)\n * in the specified element.\n */\n (function (root, factory) {\n     if (typeof module === 'object' && module.exports) {\n         // Node/CommonJS\n         module.exports = factory();\n     } else if (typeof define === 'function' && define.amd) {\n         // AMD. Register as an anonymous module.\n         define(factory);\n     } else {\n         // Browser globals\n         root.findAndReplaceDOMText = factory();\n     }\n }(this, function factory() {\n\n\tvar PORTION_MODE_RETAIN = 'retain';\n\tvar PORTION_MODE_FIRST = 'first';\n\n\tvar doc = document;\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction escapeRegExp(s) {\n\t\treturn String(s).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n\t}\n\n\tfunction exposed() {\n\t\t// Try deprecated arg signature first:\n\t\treturn deprecated.apply(null, arguments) || findAndReplaceDOMText.apply(null, arguments);\n\t}\n\n\tfunction deprecated(regex, node, replacement, captureGroup, elFilter) {\n\t\tif ((node && !node.nodeType) && arguments.length <= 2) {\n\t\t\treturn false;\n\t\t}\n\t\tvar isReplacementFunction = typeof replacement == 'function';\n\n\t\tif (isReplacementFunction) {\n\t\t\treplacement = (function(original) {\n\t\t\t\treturn function(portion, match) {\n\t\t\t\t\treturn original(portion.text, match.startIndex);\n\t\t\t\t};\n\t\t\t}(replacement));\n\t\t}\n\n\t\t// Awkward support for deprecated argument signature (<0.4.0)\n\t\tvar instance = findAndReplaceDOMText(node, {\n\n\t\t\tfind: regex,\n\n\t\t\twrap: isReplacementFunction ? null : replacement,\n\t\t\treplace: isReplacementFunction ? replacement : '$' + (captureGroup || '&'),\n\n\t\t\tprepMatch: function(m, mi) {\n\n\t\t\t\t// Support captureGroup (a deprecated feature)\n\n\t\t\t\tif (!m[0]) throw 'findAndReplaceDOMText cannot handle zero-length matches';\n\n\t\t\t\tif (captureGroup > 0) {\n\t\t\t\t\tvar cg = m[captureGroup];\n\t\t\t\t\tm.index += m[0].indexOf(cg);\n\t\t\t\t\tm[0] = cg;\n\t\t\t\t}\n\n\t\t\t\tm.endIndex = m.index + m[0].length;\n\t\t\t\tm.startIndex = m.index;\n\t\t\t\tm.index = mi;\n\n\t\t\t\treturn m;\n\t\t\t},\n\t\t\tfilterElements: elFilter\n\t\t});\n\n\t\texposed.revert = function() {\n\t\t\treturn instance.revert();\n\t\t};\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * findAndReplaceDOMText\n\t *\n\t * Locates matches and replaces with replacementNode\n\t *\n\t * @param {Node} node Element or Text node to search within\n\t * @param {RegExp} options.find The regular expression to match\n\t * @param {String|Element} [options.wrap] A NodeName, or a Node to clone\n\t * @param {String} [options.wrapClass] A classname to append to the wrapping element\n\t * @param {String|Function} [options.replace='$&'] What to replace each match with\n\t * @param {Function} [options.filterElements] A Function to be called to check whether to\n\t *\tprocess an element. (returning true = process element,\n\t *\treturning false = avoid element)\n\t */\n\tfunction findAndReplaceDOMText(node, options) {\n\t\treturn new Finder(node, options);\n\t}\n\n\texposed.NON_PROSE_ELEMENTS = {\n\t\tbr:1, hr:1,\n\t\t// Media / Source elements:\n\t\tscript:1, style:1, img:1, video:1, audio:1, canvas:1, svg:1, map:1, object:1,\n\t\t// Input elements\n\t\tinput:1, textarea:1, select:1, option:1, optgroup: 1, button:1\n\t};\n\n\texposed.NON_CONTIGUOUS_PROSE_ELEMENTS = {\n\n\t\t// Elements that will not contain prose or block elements where we don't\n\t\t// want prose to be matches across element borders:\n\n\t\t// Block Elements\n\t\taddress:1, article:1, aside:1, blockquote:1, dd:1, div:1,\n\t\tdl:1, fieldset:1, figcaption:1, figure:1, footer:1, form:1, h1:1, h2:1, h3:1,\n\t\th4:1, h5:1, h6:1, header:1, hgroup:1, hr:1, main:1, nav:1, noscript:1, ol:1,\n\t\toutput:1, p:1, pre:1, section:1, ul:1,\n\t\t// Other misc. elements that are not part of continuous inline prose:\n\t\tbr:1, li: 1, summary: 1, dt:1, details:1, rp:1, rt:1, rtc:1,\n\t\t// Media / Source elements:\n\t\tscript:1, style:1, img:1, video:1, audio:1, canvas:1, svg:1, map:1, object:1,\n\t\t// Input elements\n\t\tinput:1, textarea:1, select:1, option:1, optgroup:1, button:1,\n\t\t// Table related elements:\n\t\ttable:1, tbody:1, thead:1, th:1, tr:1, td:1, caption:1, col:1, tfoot:1, colgroup:1\n\n\t};\n\n\texposed.NON_INLINE_PROSE = function(el) {\n\t\treturn hasOwn.call(exposed.NON_CONTIGUOUS_PROSE_ELEMENTS, el.nodeName.toLowerCase());\n\t};\n\n\t// Presets accessed via `options.preset` when calling findAndReplaceDOMText():\n\texposed.PRESETS = {\n\t\tprose: {\n\t\t\tforceContext: exposed.NON_INLINE_PROSE,\n\t\t\tfilterElements: function(el) {\n\t\t\t\treturn !hasOwn.call(exposed.NON_PROSE_ELEMENTS, el.nodeName.toLowerCase());\n\t\t\t}\n\t\t}\n\t};\n\n\texposed.Finder = Finder;\n\n\t/**\n\t * Finder -- encapsulates logic to find and replace.\n\t */\n\tfunction Finder(node, options) {\n\n\t\tvar preset = options.preset && exposed.PRESETS[options.preset];\n\n\t\toptions.portionMode = options.portionMode || PORTION_MODE_RETAIN;\n\n\t\tif (preset) {\n\t\t\tfor (var i in preset) {\n\t\t\t\tif (hasOwn.call(preset, i) && !hasOwn.call(options, i)) {\n\t\t\t\t\toptions[i] = preset[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.node = node;\n\t\tthis.options = options;\n\n\t\t// Enable match-preparation method to be passed as option:\n\t\tthis.prepMatch = options.prepMatch || this.prepMatch;\n\n\t\tthis.reverts = [];\n\n\t\tthis.matches = this.search();\n\n\t\tif (this.matches.length) {\n\t\t\tthis.processMatches();\n\t\t}\n\n\t}\n\n\tFinder.prototype = {\n\n\t\t/**\n\t\t * Searches for all matches that comply with the instance's 'match' option\n\t\t */\n\t\tsearch: function() {\n\n\t\t\tvar match;\n\t\t\tvar matchIndex = 0;\n\t\t\tvar offset = 0;\n\t\t\tvar regex = this.options.find;\n\t\t\tvar textAggregation = this.getAggregateText();\n\t\t\tvar matches = [];\n\t\t\tvar self = this;\n\n\t\t\tregex = typeof regex === 'string' ? RegExp(escapeRegExp(regex), 'g') : regex;\n\n\t\t\tmatchAggregation(textAggregation);\n\n\t\t\tfunction matchAggregation(textAggregation) {\n\t\t\t\tfor (var i = 0, l = textAggregation.length; i < l; ++i) {\n\n\t\t\t\t\tvar text = textAggregation[i];\n\n\t\t\t\t\tif (typeof text !== 'string') {\n\t\t\t\t\t\t// Deal with nested contexts: (recursive)\n\t\t\t\t\t\tmatchAggregation(text);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (regex.global) {\n\t\t\t\t\t\twhile (match = regex.exec(text)) {\n\t\t\t\t\t\t\tmatches.push(self.prepMatch(match, matchIndex++, offset));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (match = text.match(regex)) {\n\t\t\t\t\t\t\tmatches.push(self.prepMatch(match, 0, offset));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += text.length;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn matches;\n\n\t\t},\n\n\t\t/**\n\t\t * Prepares a single match with useful meta info:\n\t\t */\n\t\tprepMatch: function(match, matchIndex, characterOffset) {\n\n\t\t\tif (!match[0]) {\n\t\t\t\tthrow new Error('findAndReplaceDOMText cannot handle zero-length matches');\n\t\t\t}\n\n\t\t\tmatch.endIndex = characterOffset + match.index + match[0].length;\n\t\t\tmatch.startIndex = characterOffset + match.index;\n\t\t\tmatch.index = matchIndex;\n\n\t\t\treturn match;\n\t\t},\n\n\t\t/**\n\t\t * Gets aggregate text within subject node\n\t\t */\n\t\tgetAggregateText: function() {\n\n\t\t\tvar elementFilter = this.options.filterElements;\n\t\t\tvar forceContext = this.options.forceContext;\n\n\t\t\treturn getText(this.node);\n\n\t\t\t/**\n\t\t\t * Gets aggregate text of a node without resorting\n\t\t\t * to broken innerText/textContent\n\t\t\t */\n\t\t\tfunction getText(node) {\n\n\t\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\treturn [node.data];\n\t\t\t\t}\n\n\t\t\t\tif (elementFilter && !elementFilter(node)) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tvar txt = [''];\n\t\t\t\tvar i = 0;\n\n\t\t\t\tif (node = node.firstChild) do {\n\n\t\t\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\t\ttxt[i] += node.data;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar innerText = getText(node);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tforceContext &&\n\t\t\t\t\t\tnode.nodeType === Node.ELEMENT_NODE &&\n\t\t\t\t\t\t(forceContext === true || forceContext(node))\n\t\t\t\t\t) {\n\t\t\t\t\t\ttxt[++i] = innerText;\n\t\t\t\t\t\ttxt[++i] = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof innerText[0] === 'string') {\n\t\t\t\t\t\t\t// Bridge nested text-node data so that they're\n\t\t\t\t\t\t\t// not considered their own contexts:\n\t\t\t\t\t\t\t// I.e. ['some', ['thing']] -> ['something']\n\t\t\t\t\t\t\ttxt[i] += innerText.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (innerText.length) {\n\t\t\t\t\t\t\ttxt[++i] = innerText;\n\t\t\t\t\t\t\ttxt[++i] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} while (node = node.nextSibling);\n\n\t\t\t\treturn txt;\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Steps through the target node, looking for matches, and\n\t\t * calling replaceFn when a match is found.\n\t\t */\n\t\tprocessMatches: function() {\n\n\t\t\tvar matches = this.matches;\n\t\t\tvar node = this.node;\n\t\t\tvar elementFilter = this.options.filterElements;\n\n\t\t\tvar startPortion,\n\t\t\t\tendPortion,\n\t\t\t\tinnerPortions = [],\n\t\t\t\tcurNode = node,\n\t\t\t\tmatch = matches.shift(),\n\t\t\t\tatIndex = 0, // i.e. nodeAtIndex\n\t\t\t\tmatchIndex = 0,\n\t\t\t\tportionIndex = 0,\n\t\t\t\tdoAvoidNode,\n\t\t\t\tnodeStack = [node];\n\n\t\t\tout: while (true) {\n\n\t\t\t\tif (curNode.nodeType === Node.TEXT_NODE) {\n\n\t\t\t\t\tif (!endPortion && curNode.length + atIndex >= match.endIndex) {\n\n\t\t\t\t\t\t// We've found the ending\n\t\t\t\t\t\tendPortion = {\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\ttext: curNode.data.substring(match.startIndex - atIndex, match.endIndex - atIndex),\n\t\t\t\t\t\t\tindexInMatch: atIndex - match.startIndex,\n\t\t\t\t\t\t\tindexInNode: match.startIndex - atIndex, // always zero for end-portions\n\t\t\t\t\t\t\tendIndexInNode: match.endIndex - atIndex,\n\t\t\t\t\t\t\tisEnd: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else if (startPortion) {\n\t\t\t\t\t\t// Intersecting node\n\t\t\t\t\t\tinnerPortions.push({\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\ttext: curNode.data,\n\t\t\t\t\t\t\tindexInMatch: atIndex - match.startIndex,\n\t\t\t\t\t\t\tindexInNode: 0 // always zero for inner-portions\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!startPortion && curNode.length + atIndex > match.startIndex) {\n\t\t\t\t\t\t// We've found the match start\n\t\t\t\t\t\tstartPortion = {\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\tindexInMatch: 0,\n\t\t\t\t\t\t\tindexInNode: match.startIndex - atIndex,\n\t\t\t\t\t\t\tendIndexInNode: match.endIndex - atIndex,\n\t\t\t\t\t\t\ttext: curNode.data.substring(match.startIndex - atIndex, match.endIndex - atIndex)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tatIndex += curNode.data.length;\n\n\t\t\t\t}\n\n\t\t\t\tdoAvoidNode = curNode.nodeType === Node.ELEMENT_NODE && elementFilter && !elementFilter(curNode);\n\n\t\t\t\tif (startPortion && endPortion) {\n\n\t\t\t\t\tcurNode = this.replaceMatch(match, startPortion, innerPortions, endPortion);\n\n\t\t\t\t\t// processMatches has to return the node that replaced the endNode\n\t\t\t\t\t// and then we step back so we can continue from the end of the\n\t\t\t\t\t// match:\n\n\t\t\t\t\tatIndex -= (endPortion.node.data.length - endPortion.endIndexInNode);\n\n\t\t\t\t\tstartPortion = null;\n\t\t\t\t\tendPortion = null;\n\t\t\t\t\tinnerPortions = [];\n\t\t\t\t\tmatch = matches.shift();\n\t\t\t\t\tportionIndex = 0;\n\t\t\t\t\tmatchIndex++;\n\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\tbreak; // no more matches\n\t\t\t\t\t}\n\n\t\t\t\t} else if (\n\t\t\t\t\t!doAvoidNode &&\n\t\t\t\t\t(curNode.firstChild || curNode.nextSibling)\n\t\t\t\t) {\n\t\t\t\t\t// Move down or forward:\n\t\t\t\t\tif (curNode.firstChild) {\n\t\t\t\t\t\tnodeStack.push(curNode);\n\t\t\t\t\t\tcurNode = curNode.firstChild;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurNode = curNode.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Move forward or up:\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (curNode.nextSibling) {\n\t\t\t\t\t\tcurNode = curNode.nextSibling;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurNode = nodeStack.pop();\n\t\t\t\t\tif (curNode === node) {\n\t\t\t\t\t\tbreak out;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Reverts ... TODO\n\t\t */\n\t\trevert: function() {\n\t\t\t// Reversion occurs backwards so as to avoid nodes subsequently\n\t\t\t// replaced during the matching phase (a forward process):\n\t\t\tfor (var l = this.reverts.length; l--;) {\n\t\t\t\tthis.reverts[l]();\n\t\t\t}\n\t\t\tthis.reverts = [];\n\t\t},\n\n\t\tprepareReplacementString: function(string, portion, match) {\n\t\t\tvar portionMode = this.options.portionMode;\n\t\t\tif (\n\t\t\t\tportionMode === PORTION_MODE_FIRST &&\n\t\t\t\tportion.indexInMatch > 0\n\t\t\t) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tstring = string.replace(/\\$(\\d+|&|`|')/g, function($0, t) {\n\t\t\t\tvar replacement;\n\t\t\t\tswitch(t) {\n\t\t\t\t\tcase '&':\n\t\t\t\t\t\treplacement = match[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '`':\n\t\t\t\t\t\treplacement = match.input.substring(0, match.startIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '\\'':\n\t\t\t\t\t\treplacement = match.input.substring(match.endIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treplacement = match[+t];\n\t\t\t\t}\n\t\t\t\treturn replacement;\n\t\t\t});\n\n\t\t\tif (portionMode === PORTION_MODE_FIRST) {\n\t\t\t\treturn string;\n\t\t\t}\n\n\t\t\tif (portion.isEnd) {\n\t\t\t\treturn string.substring(portion.indexInMatch);\n\t\t\t}\n\n\t\t\treturn string.substring(portion.indexInMatch, portion.indexInMatch + portion.text.length);\n\t\t},\n\n\t\tgetPortionReplacementNode: function(portion, match) {\n\n\t\t\tvar replacement = this.options.replace || '$&';\n\t\t\tvar wrapper = this.options.wrap;\n\t\t\tvar wrapperClass = this.options.wrapClass;\n\n\t\t\tif (wrapper && wrapper.nodeType) {\n\t\t\t\t// Wrapper has been provided as a stencil-node for us to clone:\n\t\t\t\tvar clone = doc.createElement('div');\n\t\t\t\tclone.innerHTML = wrapper.outerHTML || new XMLSerializer().serializeToString(wrapper);\n\t\t\t\twrapper = clone.firstChild;\n\t\t\t}\n\n\t\t\tif (typeof replacement == 'function') {\n\t\t\t\treplacement = replacement(portion, match);\n\t\t\t\tif (replacement && replacement.nodeType) {\n\t\t\t\t\treturn replacement;\n\t\t\t\t}\n\t\t\t\treturn doc.createTextNode(String(replacement));\n\t\t\t}\n\n\t\t\tvar el = typeof wrapper == 'string' ? doc.createElement(wrapper) : wrapper;\n\n \t\t\tif (el && wrapperClass) {\n\t\t\t\tel.className = wrapperClass;\n\t\t\t}\n\n\t\t\treplacement = doc.createTextNode(\n\t\t\t\tthis.prepareReplacementString(\n\t\t\t\t\treplacement, portion, match\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif (!replacement.data) {\n\t\t\t\treturn replacement;\n\t\t\t}\n\n\t\t\tif (!el) {\n\t\t\t\treturn replacement;\n\t\t\t}\n\n\t\t\tel.appendChild(replacement);\n\n\t\t\treturn el;\n\t\t},\n\n\t\treplaceMatch: function(match, startPortion, innerPortions, endPortion) {\n\n\t\t\tvar matchStartNode = startPortion.node;\n\t\t\tvar matchEndNode = endPortion.node;\n\n\t\t\tvar precedingTextNode;\n\t\t\tvar followingTextNode;\n\n\t\t\tif (matchStartNode === matchEndNode) {\n\n\t\t\t\tvar node = matchStartNode;\n\n\t\t\t\tif (startPortion.indexInNode > 0) {\n\t\t\t\t\t// Add `before` text node (before the match)\n\t\t\t\t\tprecedingTextNode = doc.createTextNode(node.data.substring(0, startPortion.indexInNode));\n\t\t\t\t\tnode.parentNode.insertBefore(precedingTextNode, node);\n\t\t\t\t}\n\n\t\t\t\t// Create the replacement node:\n\t\t\t\tvar newNode = this.getPortionReplacementNode(\n\t\t\t\t\tendPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tnode.parentNode.insertBefore(newNode, node);\n\n\t\t\t\tif (endPortion.endIndexInNode < node.length) { // ?????\n\t\t\t\t\t// Add `after` text node (after the match)\n\t\t\t\t\tfollowingTextNode = doc.createTextNode(node.data.substring(endPortion.endIndexInNode));\n\t\t\t\t\tnode.parentNode.insertBefore(followingTextNode, node);\n\t\t\t\t}\n\n\t\t\t\tnode.parentNode.removeChild(node);\n\n\t\t\t\tthis.reverts.push(function() {\n\t\t\t\t\tif (precedingTextNode === newNode.previousSibling) {\n\t\t\t\t\t\tprecedingTextNode.parentNode.removeChild(precedingTextNode);\n\t\t\t\t\t}\n\t\t\t\t\tif (followingTextNode === newNode.nextSibling) {\n\t\t\t\t\t\tfollowingTextNode.parentNode.removeChild(followingTextNode);\n\t\t\t\t\t}\n\t\t\t\t\tnewNode.parentNode.replaceChild(node, newNode);\n\t\t\t\t});\n\n\t\t\t\treturn newNode;\n\n\t\t\t} else {\n\t\t\t\t// Replace matchStartNode -> [innerMatchNodes...] -> matchEndNode (in that order)\n\n\n\t\t\t\tprecedingTextNode = doc.createTextNode(\n\t\t\t\t\tmatchStartNode.data.substring(0, startPortion.indexInNode)\n\t\t\t\t);\n\n\t\t\t\tfollowingTextNode = doc.createTextNode(\n\t\t\t\t\tmatchEndNode.data.substring(endPortion.endIndexInNode)\n\t\t\t\t);\n\n\t\t\t\tvar firstNode = this.getPortionReplacementNode(\n\t\t\t\t\tstartPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tvar innerNodes = [];\n\n\t\t\t\tfor (var i = 0, l = innerPortions.length; i < l; ++i) {\n\t\t\t\t\tvar portion = innerPortions[i];\n\t\t\t\t\tvar innerNode = this.getPortionReplacementNode(\n\t\t\t\t\t\tportion,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t);\n\t\t\t\t\tportion.node.parentNode.replaceChild(innerNode, portion.node);\n\t\t\t\t\tthis.reverts.push((function(portion, innerNode) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tinnerNode.parentNode.replaceChild(portion.node, innerNode);\n\t\t\t\t\t\t};\n\t\t\t\t\t}(portion, innerNode)));\n\t\t\t\t\tinnerNodes.push(innerNode);\n\t\t\t\t}\n\n\t\t\t\tvar lastNode = this.getPortionReplacementNode(\n\t\t\t\t\tendPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tmatchStartNode.parentNode.insertBefore(precedingTextNode, matchStartNode);\n\t\t\t\tmatchStartNode.parentNode.insertBefore(firstNode, matchStartNode);\n\t\t\t\tmatchStartNode.parentNode.removeChild(matchStartNode);\n\n\t\t\t\tmatchEndNode.parentNode.insertBefore(lastNode, matchEndNode);\n\t\t\t\tmatchEndNode.parentNode.insertBefore(followingTextNode, matchEndNode);\n\t\t\t\tmatchEndNode.parentNode.removeChild(matchEndNode);\n\n\t\t\t\tthis.reverts.push(function() {\n\t\t\t\t\tprecedingTextNode.parentNode.removeChild(precedingTextNode);\n\t\t\t\t\tfirstNode.parentNode.replaceChild(matchStartNode, firstNode);\n\t\t\t\t\tfollowingTextNode.parentNode.removeChild(followingTextNode);\n\t\t\t\t\tlastNode.parentNode.replaceChild(matchEndNode, lastNode);\n\t\t\t\t});\n\n\t\t\t\treturn lastNode;\n\t\t\t}\n\t\t}\n\n\t};\n\n\treturn exposed;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/findandreplacedomtext/src/findAndReplaceDOMText.js\n// module id = 17\n// module chunks = 0","module.exports = (__webpack_require__(8))(225);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/lodash/lodash.js from dll-reference standard\n// module id = 19\n// module chunks = 0","import { info } from '../common/log';\nimport { bindToolbar, removeToolbar } from './mounting';\nimport { getSync, setSync } from '../common/storage';\nimport {\n  CLASS_PROGRESS_TO_SHOW_TOOLBAR,\n  CLASS_UNKNOWN_WORD,\n  CLASS_KNOWN_WORD,\n  CLASS_WORD,\n  PROP_WORD,\n} from '../const/style';\n\nasync function updateKnownWordStorage({ word }) {\n  const knownList = await getSync('knownList');\n  const selectedWordList = await getSync('selectedWordList');\n  const list = knownList[selectedWordList];\n  if (list) {\n    if (!list.find(entry => entry.word === word)) {\n      const newEntry = { word, date: new Date().getTime(), sentence: '' };\n      list.push(newEntry);\n      await setSync('knownList', Object.assign({}, knownList, {\n        [selectedWordList]: list,\n      }));\n      info(`add ${word} into knowlist`);\n    }\n  }\n}\n\nexport function hideToolbar({ targetNode }) {\n  console.log('clear');\n  delete targetNode.attributes.isToolbarShow; // eslint-disable-line no-param-reassign\n  removeToolbar({ targetNode });\n}\n\nexport async function hideWord({ word, targetNode }) {\n  await updateKnownWordStorage({ word });\n  [...document.querySelectorAll(`.${CLASS_WORD}[${PROP_WORD}=\"${word}\"]`)].forEach((node) => {\n    node.classList.remove(CLASS_UNKNOWN_WORD);\n    node.classList.add(CLASS_KNOWN_WORD);\n  });\n  hideToolbar({ targetNode });\n}\n\nexport function actionUpdateKnownWord({ word, targetNode }) {\n  hideWord({ word, targetNode });\n  info(`known ${word}`);\n}\n\nexport function showToolbar({ word, targetNode, event, wordListMap }) {\n  console.log('show');\n  targetNode.attributes.isToolbarShow = true; // eslint-disable-line no-param-reassign\n  bindToolbar({ word, targetNode, event, wordListMap }, {\n    actionUpdateKnownWord: actionUpdateKnownWord.bind(null, { word, targetNode }),\n  });\n}\n\nexport function showProgressBar({ targetNode }) {\n  let progressNode = targetNode.querySelector(`.${CLASS_PROGRESS_TO_SHOW_TOOLBAR}`);\n  if (!progressNode) {\n    progressNode = document.createElement('div');\n    progressNode.classList.add(CLASS_PROGRESS_TO_SHOW_TOOLBAR);\n    targetNode.append(progressNode);\n  }\n}\n\nexport function removeProgressBar({ targetNode }) {\n  const progressNode = targetNode.querySelector(`.${CLASS_PROGRESS_TO_SHOW_TOOLBAR}`);\n  if (progressNode) progressNode.remove();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/actions.js","import React from 'react';\nimport { info } from '../common/log';\nimport { getKnownList } from '../common/word-storage';\nimport {\n  CLASS_SIDEBAR_WRAP,\n  CLASS_SIDEBAR_TOOLBAR,\n  CLASS_SIDEBAR_WORDLIST,\n  CLASS_SIDEBAR_KNOWN_WORD,\n} from '../const/style';\n\nfunction sortWordList(list, sortBy, dir = 'desc') {\n  if (['rank', 'count'].indexOf(sortBy) === -1) throw new Error(`sortBy ${sortBy} is not supported`);\n  const sortFunc = dir === 'desc' ?\n              (b, a) => a[sortBy] - b[sortBy] :\n              (a, b) => a[sortBy] - b[sortBy];\n  return list.slice().sort(sortFunc);\n}\n\nexport default class SideBar extends React.Component {\n  constructor(props) {\n    super(props);\n    info('Mount sidebar');\n    this.props.window.__cw__addWord = this.addWord.bind(this);\n    this.checkboxChange = this.checkboxChange.bind(this);\n    this.state = {\n      words: [],\n      sort: 'rank',\n      sortDir: 'asc',\n      hideKnown: true,\n    };\n    this.tempState = {\n      words: [],\n      lastUpdate: new Date(),\n      updateTO: null,\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(nextState.words, this.state.words) ||\n            !_.isEqual(nextState.sort, this.state.sort) ||\n            !_.isEqual(nextState.sortBy, this.state.sortBy) ||\n            !_.isEqual(nextState.hideKnown, this.state.hideKnown);\n  }\n\n  addWord(wordObj) {\n    const words = this.tempState.words;\n    const entry = words.find(e => e.word === wordObj.word);\n    if (!entry) {\n      const newObj = { ...wordObj, count: 1 };\n      words.push(newObj);\n    } else {\n      entry.count += 1;\n    }\n    // throttling\n    if (new Date().getTime() - this.tempState.lastUpdate > 800) {\n      this.setState({ words });\n      this.tempState.lastUpdate = new Date().getTime();\n      clearTimeout(this.tempState.updateTO);\n    } else {\n      this.tempState.updateTO = setTimeout(() => {\n        this.setState({ words });\n      }, 1000);\n    }\n  }\n\n  checkboxChange() {\n    this.setState({ hideKnown: !this.state.hideKnown });\n  }\n\n  render() {\n    // const clickKnown = this.clickKnown.bind(this);\n    const words = this.state.words;\n    const sortedList = sortWordList(words, this.state.sort, this.state.sortDir);\n    const filteredList = this.state.hideKnown ? \n                        sortedList.filter(word => !word.isKnown) : sortedList;\n    const sortByRank = () => this.setState({ sort: 'rank', sortDir: 'asc' });\n    const sortByCount = () => this.setState({ sort: 'count', sortDir: 'desc' });\n    info('render');\n    return (\n      <div className={CLASS_SIDEBAR_WRAP}>\n        <div className={CLASS_SIDEBAR_TOOLBAR}>\n          Sort &nbsp;\n          <a href=\"#rank\" onClick={sortByRank} className={this.state.sort === 'rank' ? 'selected' : true}>Rank</a>\n          <a href=\"#count\" onClick={sortByCount} className={this.state.sort === 'count' ? 'selected' : true}>Frequency</a>\n          &nbsp;\n          <label>\n            <input type=\"checkbox\" checked={this.state.hideKnown} onChange={this.checkboxChange} />\n            &nbsp;Hide Known \n          </label>\n        </div>\n        <div className={CLASS_SIDEBAR_WORDLIST}>\n          {filteredList.map(w => (<div key={w.rank} className={w.isKnown ? CLASS_SIDEBAR_KNOWN_WORD : ''}>\n            {w.word} [{w.rank}] ({w.count})\n          </div>))}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/sidebar.component.jsx","import React from 'react';\n\nexport default class Toolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.clickKnown = this.clickKnown.bind(this);\n  }\n  clickKnown() {\n    console.log(this.props);\n    this.props.actions.actionUpdateKnownWord(this.props.word);\n  }\n  render() {\n    // const clickKnown = this.clickKnown.bind(this);\n    return (\n      <div>\n        {this.props.meta ? `[${this.props.meta.rank}]` : ''}\n        <span btn onClick={this.clickKnown}>Known</span>\n        <span btn disabled title=\"The feature is not available yet\">Definition</span>\n        <span btn disabled title=\"The feature is not available yet\">Collocation</span>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/toolbar.component.jsx","module.exports = (__webpack_require__(8))(14);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react-dom/index.js from dll-reference standard\n// module id = 29\n// module chunks = 0","import findAndReplaceDOMText from 'findandreplacedomtext';\nimport _ from 'lodash';\n// import isUndefined from 'lodash/isUndefined';\nimport { getKnownList } from '../common/word-storage';\nimport { info } from '../common/log';\nimport { addMessageListener, INIT_IN_PAGE_CONNECTION, sendMessage } from '../common/communication';\nimport { isTopWindow, getTopWindow, isZeroIframe } from './window-helper';\nimport {\n  mouseenterHandler,\n  mouseleaveHandler,\n} from './event-handlers';\nimport {\n  mountSideBar,\n} from './mounting';\nimport {\n  EVENT_BROWSER_ACTION_CLICK,\n} from '../const/event';\nimport {\n  CLASS_UNKNOWN_WORD,\n  CLASS_KNOWN_WORD,\n  CLASS_SIDEBAR_WRAP,\n  CLASS_WORD,\n  PROP_WORD,\n} from '../const/style';\n\nfunction nerverHappen() {\n  require('./style.less');\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n});\n\n\nconst knownListMap = {};\nconst wordListMap = {};\nlet wordListRegExp = null;\nconst NON_PROSE_ELEMENTS = ['br', 'hr', 'script', 'noscript', 'style', 'img', 'video', 'audio', 'canvas', 'svg', 'map', 'object', 'input', 'textarea', 'select', 'option', 'optgroup', 'button'];\nasync function highlight() {\n  let count = 0;\n  findAndReplaceDOMText(document.body, {\n    find: wordListRegExp,\n    preset: 'prose',\n    replace: (s) => {\n      const word = s.text.toLowerCase();\n      if (_.isUndefined(wordListMap[word])) return s.text;\n      count += 1;\n      const replacementNode = document.createElement('span');\n      const textNode = document.createTextNode(s.text);\n      replacementNode.appendChild(textNode);\n      replacementNode.classList.add(CLASS_WORD);\n      if (knownListMap[word]) {\n        replacementNode.classList.add(CLASS_KNOWN_WORD);\n      } else {\n        replacementNode.classList.add(CLASS_UNKNOWN_WORD);\n      }\n      replacementNode.setAttribute(PROP_WORD, word);\n\n      replacementNode.addEventListener('mouseenter', mouseenterHandler.bind(\n        { wordListMap }, word, replacementNode));\n      replacementNode.addEventListener('mouseleave', mouseleaveHandler.bind(null, word, replacementNode));\n      window.top.__cw__addWord({\n        ...wordListMap[word],\n        isKnown: !_.isUndefined(knownListMap[word]),\n      });\n      return replacementNode;\n    },\n    filterElements: (el =>\n        NON_PROSE_ELEMENTS.indexOf(el.nodeName.toLowerCase()) === -1 &&\n        el.className !== (CLASS_SIDEBAR_WRAP)),\n  });\n  info(`Matched ${count} words`);\n}\n\nasync function active(params) {\n  info('active', window.location.href);\n  if (isTopWindow()) {\n    // mountSideBar();\n    sendMessage({\n      type: INIT_IN_PAGE_CONNECTION,\n      isTop: true,\n    });\n  } else if (isZeroIframe()) {\n    info('ignore content due to zero size iframe');\n    return;\n  } else {\n    // setTimeout(active.bind(null, params), 50);\n    sendMessage({\n      type: INIT_IN_PAGE_CONNECTION,\n    });\n  }\n  // const { list } = await getKnownList();\n  // list.forEach((knownWord) => {\n  //   knownListMap[knownWord.word.toLowerCase()] = knownWord;\n  // });\n  // if (_.isEmpty(wordListMap)) {\n  //   const words = [];\n  //   wordList.list.forEach((word) => {\n  //     wordListMap[word.word] = word;\n  //     words.push(word.word);\n  //   });\n  //   wordListRegExp = new RegExp(`\\\\b(${words.join('|')})\\\\b`, 'gi');\n  // }\n\n  // highlight();\n}\n\nfunction addListener() {\n  addMessageListener((msg, sender, sendResponse) => {\n    if (msg.event && msg.event === EVENT_BROWSER_ACTION_CLICK) {\n      const wordList = msg.wordList;\n      active({ wordList });\n    }\n    sendResponse({});\n  });\n}\n\naddListener();\n\ninfo('CW_Content');\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/index.js"],"sourceRoot":""}