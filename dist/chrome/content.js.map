{"version":3,"sources":["webpack:///webpack/bootstrap 09fe18a4a7a3936227c9","webpack:///./src/common/log.js","webpack:///./src/common/storage.js","webpack:///./src/common/communication.js","webpack:///./src/const/events.js","webpack:///./src/const/class-name.js","webpack:///delegated ./node_modules/react/react.js from dll-reference standard","webpack:///external \"standard\"","webpack:///./src/const/configuration.js","webpack:///./src/content/actions.js","webpack:///./src/content/toolbar.js","webpack:///./src/content/style.less","webpack:///./~/findandreplacedomtext/src/findAndReplaceDOMText.js","webpack:///./src/content/toolbar.component.jsx","webpack:///delegated ./node_modules/react-dom/index.js from dll-reference standard","webpack:///./src/content/index.js","webpack:///./src/content/event-handlers.js"],"names":["log","info","warn","error","getConsole","args","console","obj","storage","Promise","resolve","reject","chrome","set","e","_set","get","items","_get","key","value","updatedItems","Object","assign","getSync","setSync","getLocal","setLocal","sendMessage","msg","callback","extension","sendMessageToTab","tabId","tabs","addMessageListener","listener","runtime","onMessage","addListener","EVENT_BROWSER_ACTION_CLICK","CLASS_PREFIX","CLASS_WORD","CLASS_UNKNOWN_WORD","CLASS_KNOWN_WORD","CLASS_TOOL_ADD_TO_KNOWN_LIST","CLASS_TOOLBAR_MOUNT_DIV","CLASS_PROGRESS_TO_SHOW_TOOLBAR","PROP_WORD","THRESHOLD_TOOLBAR_SHOW","THRESHOLD_TOOLBAR_PROGRESS_SHOW","word","knownList","selectedWordList","list","find","entry","newEntry","date","Date","getTime","sentence","push","updateKnownWordStorage","targetNode","document","querySelectorAll","forEach","node","classList","remove","add","hideToolbar","hideWord","actionUpdateKnownWord","showToolbar","showProgressBar","removeProgressBar","attributes","isToolbarShow","event","bind","progressNode","querySelector","createElement","append","bindToolbar","removeToolbar","actions","mountNode","appendChild","render","unmountComponentAtNode","Toolbar","Component","constructor","props","clickKnown","count","body","wordListRegExp","replace","s","replacementNode","textNode","createTextNode","text","toLowerCase","knownListMap","setAttribute","addEventListener","highlight","wordList","require","allKnownList","id","knownWord","wordListMap","words","RegExp","join","active","sender","sendResponse","mouseenterHandler","mouseleaveHandler","target","contains","clearTimeout","leaveTO","enterTO","setTimeout"],"mappings":"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AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,OAAO;AACnB,YAAY,eAAe;AAC3B,YAAY,OAAO;AACnB,YAAY,gBAAgB;AAC5B,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,+CAA+C,OAAO;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kDAAkD;AAClD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,IAAI;AACJ;;;AAGA;AACA;AACA;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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 09fe18a4a7a3936227c9","/* eslint-disable no-console */\nexport default function log(...args) {\n  console.log(...args);\n}\n\nexport function info(...args) {\n  console.info(...args);\n}\n\nexport function warn(...args) {\n  console.warn(...args);\n}\n\nexport function error(...args) {\n  console.error(...args);\n}\n\nexport function getConsole() {\n  return console;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/log.js","/* eslint-disable no-underscore-dangle */\n\nasync function _set(obj, storage = 'sync') {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.storage[storage].set(obj, () => {\n        resolve();\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nasync function _get(obj = null, storage = 'sync') {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.storage[storage].get((items) => {\n        resolve(items);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nasync function get(key, storage) {\n  try {\n    const items = await _get(null, storage);\n    return items[key];\n  } catch (e) {\n    return null;\n  }\n}\n\nasync function set(key, value, storage) {\n  const items = await _get(null, storage)\n  const updatedItems = Object.assign({}, items, {\n    [key]: value,\n  });\n  await _set(updatedItems, storage);\n  return true;\n}\n\nfunction getSync(key) {\n  return get(key, 'sync');\n}\n\nfunction setSync(key, value) {\n  return set(key, value, 'sync');\n}\n\nfunction getLocal(key) {\n  return get(key, 'local');\n}\n\nfunction setLocal(key, value) {\n  return set(key, value, 'local');\n}\n\nexport {\n  getSync,\n  setSync,\n  getLocal,\n  setLocal,\n  _set,\n  _get,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/storage.js","function sendMessage(msg, callback) {\n  chrome.extension.sendMessage(msg, callback);\n}\n\nfunction sendMessageToTab(tabId, msg) {\n  chrome.tabs.sendMessage(tabId, msg);\n}\n\nfunction addMessageListener(listener/* fn(msg, sender, sendResponse) */) {\n  chrome.runtime.onMessage.addListener(listener);\n}\n\nexport {\n  sendMessage,\n  sendMessageToTab,\n  addMessageListener,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/communication.js","export const EVENT_BROWSER_ACTION_CLICK = 'EVENT_BROWSER_ACTION_CLICK';\n\n\n// WEBPACK FOOTER //\n// ./src/const/events.js","const CLASS_PREFIX = 'extension-cw--';\nexport const CLASS_WORD = CLASS_PREFIX + 'word';\nexport const CLASS_UNKNOWN_WORD = CLASS_PREFIX + 'word--unknown';\nexport const CLASS_KNOWN_WORD = CLASS_PREFIX + 'word--known';\n\nexport const CLASS_TOOL_ADD_TO_KNOWN_LIST = CLASS_PREFIX + 'tool--known';\nexport const CLASS_TOOLBAR_MOUNT_DIV = CLASS_PREFIX + 'tool--div-mount';\nexport const CLASS_PROGRESS_TO_SHOW_TOOLBAR = CLASS_PREFIX + 'progress--toolbar-enable';\nexport const PROP_WORD = CLASS_PREFIX + 'word';\n\n\n// WEBPACK FOOTER //\n// ./src/const/class-name.js","module.exports = (__webpack_require__(9))(78);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react/react.js from dll-reference standard\n// module id = 8\n// module chunks = 1","module.exports = standard;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"standard\"\n// module id = 9\n// module chunks = 1","export const THRESHOLD_TOOLBAR_SHOW = 800;\nexport const THRESHOLD_TOOLBAR_PROGRESS_SHOW = 51;\n\n\n// WEBPACK FOOTER //\n// ./src/const/configuration.js","import { info } from '../common/log';\nimport { bindToolbar, removeToolbar } from './toolbar';\nimport { getSync, setSync } from '../common/storage';\nimport {\n  CLASS_PROGRESS_TO_SHOW_TOOLBAR,\n  CLASS_UNKNOWN_WORD,\n  CLASS_KNOWN_WORD,\n  CLASS_WORD,\n  PROP_WORD,\n} from '../const/class-name';\n\nasync function updateKnownWordStorage({ word }) {\n  const knownList = await getSync('knownList');\n  const selectedWordList = await getSync('selectedWordList');\n  const list = knownList[selectedWordList];\n  if (list) {\n    if (!list.find(entry => entry.word === word)) {\n      const newEntry = { word, date: new Date().getTime(), sentence: '' };\n      list.push(newEntry);\n      await setSync('knownList', Object.assign({}, knownList, {\n        [selectedWordList]: list,\n      }));\n      info(`add ${word} into knowlist`);\n    }\n  }\n}\n\nexport function hideToolbar({ targetNode }) {\n  console.log('clear');\n  delete targetNode.attributes.isToolbarShow; // eslint-disable-line no-param-reassign\n  removeToolbar({ targetNode });\n}\n\nexport async function hideWord({ word, targetNode }) {\n  await updateKnownWordStorage({ word });\n  [...document.querySelectorAll(`.${CLASS_WORD}[${PROP_WORD}=\"${word}\"]`)].forEach((node) => {\n    node.classList.remove(CLASS_UNKNOWN_WORD);\n    node.classList.add(CLASS_KNOWN_WORD);\n  });\n  hideToolbar({ targetNode });\n}\n\nexport function actionUpdateKnownWord({ word, targetNode }) {\n  hideWord({ word, targetNode });\n  info(`known ${word}`);\n}\n\nexport function showToolbar({ word, targetNode, event }) {\n  console.log('show');\n  targetNode.attributes.isToolbarShow = true; // eslint-disable-line no-param-reassign\n  bindToolbar({ word, targetNode, event }, {\n    actionUpdateKnownWord: actionUpdateKnownWord.bind(null, { word, targetNode }),\n  });\n}\n\nexport function showProgressBar({ targetNode }) {\n  let progressNode = targetNode.querySelector(`.${CLASS_PROGRESS_TO_SHOW_TOOLBAR}`);\n  if (!progressNode) {\n    progressNode = document.createElement('div');\n    progressNode.classList.add(CLASS_PROGRESS_TO_SHOW_TOOLBAR);\n    targetNode.append(progressNode);\n  }\n}\n\nexport function removeProgressBar({ targetNode }) {\n  const progressNode = targetNode.querySelector(`.${CLASS_PROGRESS_TO_SHOW_TOOLBAR}`);\n  if (progressNode) progressNode.remove();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/actions.js","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport Toolbar from './toolbar.component';\nimport {\n  CLASS_TOOLBAR_MOUNT_DIV,\n} from '../const/class-name';\n\n\n\nexport function bindToolbar({ word, targetNode, event }, actions) {\n  const mountNode = document.createElement('div');\n  mountNode.classList.add(CLASS_TOOLBAR_MOUNT_DIV);\n  targetNode.appendChild(mountNode);\n  ReactDOM.render(<Toolbar word={word} node={targetNode} actions={actions} />, mountNode);\n  return mountNode;\n}\n\nexport function removeToolbar({ targetNode }) {\n  const mountNode = targetNode.querySelector(`.${CLASS_TOOLBAR_MOUNT_DIV}`);\n  if (mountNode) {\n    ReactDOM.unmountComponentAtNode(mountNode);\n    mountNode.remove();\n    return true;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/toolbar.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/style.less\n// module id = 15\n// module chunks = 1","/**\n * findAndReplaceDOMText v 0.4.5\n * @author James Padolsey http://james.padolsey.com\n * @license http://unlicense.org/UNLICENSE\n *\n * Matches the text of a DOM node against a regular expression\n * and replaces each match (or node-separated portions of the match)\n * in the specified element.\n */\n (function (root, factory) {\n     if (typeof module === 'object' && module.exports) {\n         // Node/CommonJS\n         module.exports = factory();\n     } else if (typeof define === 'function' && define.amd) {\n         // AMD. Register as an anonymous module.\n         define(factory);\n     } else {\n         // Browser globals\n         root.findAndReplaceDOMText = factory();\n     }\n }(this, function factory() {\n\n\tvar PORTION_MODE_RETAIN = 'retain';\n\tvar PORTION_MODE_FIRST = 'first';\n\n\tvar doc = document;\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction escapeRegExp(s) {\n\t\treturn String(s).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n\t}\n\n\tfunction exposed() {\n\t\t// Try deprecated arg signature first:\n\t\treturn deprecated.apply(null, arguments) || findAndReplaceDOMText.apply(null, arguments);\n\t}\n\n\tfunction deprecated(regex, node, replacement, captureGroup, elFilter) {\n\t\tif ((node && !node.nodeType) && arguments.length <= 2) {\n\t\t\treturn false;\n\t\t}\n\t\tvar isReplacementFunction = typeof replacement == 'function';\n\n\t\tif (isReplacementFunction) {\n\t\t\treplacement = (function(original) {\n\t\t\t\treturn function(portion, match) {\n\t\t\t\t\treturn original(portion.text, match.startIndex);\n\t\t\t\t};\n\t\t\t}(replacement));\n\t\t}\n\n\t\t// Awkward support for deprecated argument signature (<0.4.0)\n\t\tvar instance = findAndReplaceDOMText(node, {\n\n\t\t\tfind: regex,\n\n\t\t\twrap: isReplacementFunction ? null : replacement,\n\t\t\treplace: isReplacementFunction ? replacement : '$' + (captureGroup || '&'),\n\n\t\t\tprepMatch: function(m, mi) {\n\n\t\t\t\t// Support captureGroup (a deprecated feature)\n\n\t\t\t\tif (!m[0]) throw 'findAndReplaceDOMText cannot handle zero-length matches';\n\n\t\t\t\tif (captureGroup > 0) {\n\t\t\t\t\tvar cg = m[captureGroup];\n\t\t\t\t\tm.index += m[0].indexOf(cg);\n\t\t\t\t\tm[0] = cg;\n\t\t\t\t}\n\n\t\t\t\tm.endIndex = m.index + m[0].length;\n\t\t\t\tm.startIndex = m.index;\n\t\t\t\tm.index = mi;\n\n\t\t\t\treturn m;\n\t\t\t},\n\t\t\tfilterElements: elFilter\n\t\t});\n\n\t\texposed.revert = function() {\n\t\t\treturn instance.revert();\n\t\t};\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * findAndReplaceDOMText\n\t *\n\t * Locates matches and replaces with replacementNode\n\t *\n\t * @param {Node} node Element or Text node to search within\n\t * @param {RegExp} options.find The regular expression to match\n\t * @param {String|Element} [options.wrap] A NodeName, or a Node to clone\n\t * @param {String} [options.wrapClass] A classname to append to the wrapping element\n\t * @param {String|Function} [options.replace='$&'] What to replace each match with\n\t * @param {Function} [options.filterElements] A Function to be called to check whether to\n\t *\tprocess an element. (returning true = process element,\n\t *\treturning false = avoid element)\n\t */\n\tfunction findAndReplaceDOMText(node, options) {\n\t\treturn new Finder(node, options);\n\t}\n\n\texposed.NON_PROSE_ELEMENTS = {\n\t\tbr:1, hr:1,\n\t\t// Media / Source elements:\n\t\tscript:1, style:1, img:1, video:1, audio:1, canvas:1, svg:1, map:1, object:1,\n\t\t// Input elements\n\t\tinput:1, textarea:1, select:1, option:1, optgroup: 1, button:1\n\t};\n\n\texposed.NON_CONTIGUOUS_PROSE_ELEMENTS = {\n\n\t\t// Elements that will not contain prose or block elements where we don't\n\t\t// want prose to be matches across element borders:\n\n\t\t// Block Elements\n\t\taddress:1, article:1, aside:1, blockquote:1, dd:1, div:1,\n\t\tdl:1, fieldset:1, figcaption:1, figure:1, footer:1, form:1, h1:1, h2:1, h3:1,\n\t\th4:1, h5:1, h6:1, header:1, hgroup:1, hr:1, main:1, nav:1, noscript:1, ol:1,\n\t\toutput:1, p:1, pre:1, section:1, ul:1,\n\t\t// Other misc. elements that are not part of continuous inline prose:\n\t\tbr:1, li: 1, summary: 1, dt:1, details:1, rp:1, rt:1, rtc:1,\n\t\t// Media / Source elements:\n\t\tscript:1, style:1, img:1, video:1, audio:1, canvas:1, svg:1, map:1, object:1,\n\t\t// Input elements\n\t\tinput:1, textarea:1, select:1, option:1, optgroup:1, button:1,\n\t\t// Table related elements:\n\t\ttable:1, tbody:1, thead:1, th:1, tr:1, td:1, caption:1, col:1, tfoot:1, colgroup:1\n\n\t};\n\n\texposed.NON_INLINE_PROSE = function(el) {\n\t\treturn hasOwn.call(exposed.NON_CONTIGUOUS_PROSE_ELEMENTS, el.nodeName.toLowerCase());\n\t};\n\n\t// Presets accessed via `options.preset` when calling findAndReplaceDOMText():\n\texposed.PRESETS = {\n\t\tprose: {\n\t\t\tforceContext: exposed.NON_INLINE_PROSE,\n\t\t\tfilterElements: function(el) {\n\t\t\t\treturn !hasOwn.call(exposed.NON_PROSE_ELEMENTS, el.nodeName.toLowerCase());\n\t\t\t}\n\t\t}\n\t};\n\n\texposed.Finder = Finder;\n\n\t/**\n\t * Finder -- encapsulates logic to find and replace.\n\t */\n\tfunction Finder(node, options) {\n\n\t\tvar preset = options.preset && exposed.PRESETS[options.preset];\n\n\t\toptions.portionMode = options.portionMode || PORTION_MODE_RETAIN;\n\n\t\tif (preset) {\n\t\t\tfor (var i in preset) {\n\t\t\t\tif (hasOwn.call(preset, i) && !hasOwn.call(options, i)) {\n\t\t\t\t\toptions[i] = preset[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.node = node;\n\t\tthis.options = options;\n\n\t\t// Enable match-preparation method to be passed as option:\n\t\tthis.prepMatch = options.prepMatch || this.prepMatch;\n\n\t\tthis.reverts = [];\n\n\t\tthis.matches = this.search();\n\n\t\tif (this.matches.length) {\n\t\t\tthis.processMatches();\n\t\t}\n\n\t}\n\n\tFinder.prototype = {\n\n\t\t/**\n\t\t * Searches for all matches that comply with the instance's 'match' option\n\t\t */\n\t\tsearch: function() {\n\n\t\t\tvar match;\n\t\t\tvar matchIndex = 0;\n\t\t\tvar offset = 0;\n\t\t\tvar regex = this.options.find;\n\t\t\tvar textAggregation = this.getAggregateText();\n\t\t\tvar matches = [];\n\t\t\tvar self = this;\n\n\t\t\tregex = typeof regex === 'string' ? RegExp(escapeRegExp(regex), 'g') : regex;\n\n\t\t\tmatchAggregation(textAggregation);\n\n\t\t\tfunction matchAggregation(textAggregation) {\n\t\t\t\tfor (var i = 0, l = textAggregation.length; i < l; ++i) {\n\n\t\t\t\t\tvar text = textAggregation[i];\n\n\t\t\t\t\tif (typeof text !== 'string') {\n\t\t\t\t\t\t// Deal with nested contexts: (recursive)\n\t\t\t\t\t\tmatchAggregation(text);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (regex.global) {\n\t\t\t\t\t\twhile (match = regex.exec(text)) {\n\t\t\t\t\t\t\tmatches.push(self.prepMatch(match, matchIndex++, offset));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (match = text.match(regex)) {\n\t\t\t\t\t\t\tmatches.push(self.prepMatch(match, 0, offset));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += text.length;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn matches;\n\n\t\t},\n\n\t\t/**\n\t\t * Prepares a single match with useful meta info:\n\t\t */\n\t\tprepMatch: function(match, matchIndex, characterOffset) {\n\n\t\t\tif (!match[0]) {\n\t\t\t\tthrow new Error('findAndReplaceDOMText cannot handle zero-length matches');\n\t\t\t}\n\n\t\t\tmatch.endIndex = characterOffset + match.index + match[0].length;\n\t\t\tmatch.startIndex = characterOffset + match.index;\n\t\t\tmatch.index = matchIndex;\n\n\t\t\treturn match;\n\t\t},\n\n\t\t/**\n\t\t * Gets aggregate text within subject node\n\t\t */\n\t\tgetAggregateText: function() {\n\n\t\t\tvar elementFilter = this.options.filterElements;\n\t\t\tvar forceContext = this.options.forceContext;\n\n\t\t\treturn getText(this.node);\n\n\t\t\t/**\n\t\t\t * Gets aggregate text of a node without resorting\n\t\t\t * to broken innerText/textContent\n\t\t\t */\n\t\t\tfunction getText(node) {\n\n\t\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\treturn [node.data];\n\t\t\t\t}\n\n\t\t\t\tif (elementFilter && !elementFilter(node)) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tvar txt = [''];\n\t\t\t\tvar i = 0;\n\n\t\t\t\tif (node = node.firstChild) do {\n\n\t\t\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\t\ttxt[i] += node.data;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar innerText = getText(node);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tforceContext &&\n\t\t\t\t\t\tnode.nodeType === Node.ELEMENT_NODE &&\n\t\t\t\t\t\t(forceContext === true || forceContext(node))\n\t\t\t\t\t) {\n\t\t\t\t\t\ttxt[++i] = innerText;\n\t\t\t\t\t\ttxt[++i] = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof innerText[0] === 'string') {\n\t\t\t\t\t\t\t// Bridge nested text-node data so that they're\n\t\t\t\t\t\t\t// not considered their own contexts:\n\t\t\t\t\t\t\t// I.e. ['some', ['thing']] -> ['something']\n\t\t\t\t\t\t\ttxt[i] += innerText.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (innerText.length) {\n\t\t\t\t\t\t\ttxt[++i] = innerText;\n\t\t\t\t\t\t\ttxt[++i] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} while (node = node.nextSibling);\n\n\t\t\t\treturn txt;\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Steps through the target node, looking for matches, and\n\t\t * calling replaceFn when a match is found.\n\t\t */\n\t\tprocessMatches: function() {\n\n\t\t\tvar matches = this.matches;\n\t\t\tvar node = this.node;\n\t\t\tvar elementFilter = this.options.filterElements;\n\n\t\t\tvar startPortion,\n\t\t\t\tendPortion,\n\t\t\t\tinnerPortions = [],\n\t\t\t\tcurNode = node,\n\t\t\t\tmatch = matches.shift(),\n\t\t\t\tatIndex = 0, // i.e. nodeAtIndex\n\t\t\t\tmatchIndex = 0,\n\t\t\t\tportionIndex = 0,\n\t\t\t\tdoAvoidNode,\n\t\t\t\tnodeStack = [node];\n\n\t\t\tout: while (true) {\n\n\t\t\t\tif (curNode.nodeType === Node.TEXT_NODE) {\n\n\t\t\t\t\tif (!endPortion && curNode.length + atIndex >= match.endIndex) {\n\n\t\t\t\t\t\t// We've found the ending\n\t\t\t\t\t\tendPortion = {\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\ttext: curNode.data.substring(match.startIndex - atIndex, match.endIndex - atIndex),\n\t\t\t\t\t\t\tindexInMatch: atIndex - match.startIndex,\n\t\t\t\t\t\t\tindexInNode: match.startIndex - atIndex, // always zero for end-portions\n\t\t\t\t\t\t\tendIndexInNode: match.endIndex - atIndex,\n\t\t\t\t\t\t\tisEnd: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else if (startPortion) {\n\t\t\t\t\t\t// Intersecting node\n\t\t\t\t\t\tinnerPortions.push({\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\ttext: curNode.data,\n\t\t\t\t\t\t\tindexInMatch: atIndex - match.startIndex,\n\t\t\t\t\t\t\tindexInNode: 0 // always zero for inner-portions\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!startPortion && curNode.length + atIndex > match.startIndex) {\n\t\t\t\t\t\t// We've found the match start\n\t\t\t\t\t\tstartPortion = {\n\t\t\t\t\t\t\tnode: curNode,\n\t\t\t\t\t\t\tindex: portionIndex++,\n\t\t\t\t\t\t\tindexInMatch: 0,\n\t\t\t\t\t\t\tindexInNode: match.startIndex - atIndex,\n\t\t\t\t\t\t\tendIndexInNode: match.endIndex - atIndex,\n\t\t\t\t\t\t\ttext: curNode.data.substring(match.startIndex - atIndex, match.endIndex - atIndex)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tatIndex += curNode.data.length;\n\n\t\t\t\t}\n\n\t\t\t\tdoAvoidNode = curNode.nodeType === Node.ELEMENT_NODE && elementFilter && !elementFilter(curNode);\n\n\t\t\t\tif (startPortion && endPortion) {\n\n\t\t\t\t\tcurNode = this.replaceMatch(match, startPortion, innerPortions, endPortion);\n\n\t\t\t\t\t// processMatches has to return the node that replaced the endNode\n\t\t\t\t\t// and then we step back so we can continue from the end of the\n\t\t\t\t\t// match:\n\n\t\t\t\t\tatIndex -= (endPortion.node.data.length - endPortion.endIndexInNode);\n\n\t\t\t\t\tstartPortion = null;\n\t\t\t\t\tendPortion = null;\n\t\t\t\t\tinnerPortions = [];\n\t\t\t\t\tmatch = matches.shift();\n\t\t\t\t\tportionIndex = 0;\n\t\t\t\t\tmatchIndex++;\n\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\tbreak; // no more matches\n\t\t\t\t\t}\n\n\t\t\t\t} else if (\n\t\t\t\t\t!doAvoidNode &&\n\t\t\t\t\t(curNode.firstChild || curNode.nextSibling)\n\t\t\t\t) {\n\t\t\t\t\t// Move down or forward:\n\t\t\t\t\tif (curNode.firstChild) {\n\t\t\t\t\t\tnodeStack.push(curNode);\n\t\t\t\t\t\tcurNode = curNode.firstChild;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurNode = curNode.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Move forward or up:\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (curNode.nextSibling) {\n\t\t\t\t\t\tcurNode = curNode.nextSibling;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurNode = nodeStack.pop();\n\t\t\t\t\tif (curNode === node) {\n\t\t\t\t\t\tbreak out;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Reverts ... TODO\n\t\t */\n\t\trevert: function() {\n\t\t\t// Reversion occurs backwards so as to avoid nodes subsequently\n\t\t\t// replaced during the matching phase (a forward process):\n\t\t\tfor (var l = this.reverts.length; l--;) {\n\t\t\t\tthis.reverts[l]();\n\t\t\t}\n\t\t\tthis.reverts = [];\n\t\t},\n\n\t\tprepareReplacementString: function(string, portion, match) {\n\t\t\tvar portionMode = this.options.portionMode;\n\t\t\tif (\n\t\t\t\tportionMode === PORTION_MODE_FIRST &&\n\t\t\t\tportion.indexInMatch > 0\n\t\t\t) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tstring = string.replace(/\\$(\\d+|&|`|')/g, function($0, t) {\n\t\t\t\tvar replacement;\n\t\t\t\tswitch(t) {\n\t\t\t\t\tcase '&':\n\t\t\t\t\t\treplacement = match[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '`':\n\t\t\t\t\t\treplacement = match.input.substring(0, match.startIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '\\'':\n\t\t\t\t\t\treplacement = match.input.substring(match.endIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treplacement = match[+t];\n\t\t\t\t}\n\t\t\t\treturn replacement;\n\t\t\t});\n\n\t\t\tif (portionMode === PORTION_MODE_FIRST) {\n\t\t\t\treturn string;\n\t\t\t}\n\n\t\t\tif (portion.isEnd) {\n\t\t\t\treturn string.substring(portion.indexInMatch);\n\t\t\t}\n\n\t\t\treturn string.substring(portion.indexInMatch, portion.indexInMatch + portion.text.length);\n\t\t},\n\n\t\tgetPortionReplacementNode: function(portion, match) {\n\n\t\t\tvar replacement = this.options.replace || '$&';\n\t\t\tvar wrapper = this.options.wrap;\n\t\t\tvar wrapperClass = this.options.wrapClass;\n\n\t\t\tif (wrapper && wrapper.nodeType) {\n\t\t\t\t// Wrapper has been provided as a stencil-node for us to clone:\n\t\t\t\tvar clone = doc.createElement('div');\n\t\t\t\tclone.innerHTML = wrapper.outerHTML || new XMLSerializer().serializeToString(wrapper);\n\t\t\t\twrapper = clone.firstChild;\n\t\t\t}\n\n\t\t\tif (typeof replacement == 'function') {\n\t\t\t\treplacement = replacement(portion, match);\n\t\t\t\tif (replacement && replacement.nodeType) {\n\t\t\t\t\treturn replacement;\n\t\t\t\t}\n\t\t\t\treturn doc.createTextNode(String(replacement));\n\t\t\t}\n\n\t\t\tvar el = typeof wrapper == 'string' ? doc.createElement(wrapper) : wrapper;\n\n \t\t\tif (el && wrapperClass) {\n\t\t\t\tel.className = wrapperClass;\n\t\t\t}\n\n\t\t\treplacement = doc.createTextNode(\n\t\t\t\tthis.prepareReplacementString(\n\t\t\t\t\treplacement, portion, match\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif (!replacement.data) {\n\t\t\t\treturn replacement;\n\t\t\t}\n\n\t\t\tif (!el) {\n\t\t\t\treturn replacement;\n\t\t\t}\n\n\t\t\tel.appendChild(replacement);\n\n\t\t\treturn el;\n\t\t},\n\n\t\treplaceMatch: function(match, startPortion, innerPortions, endPortion) {\n\n\t\t\tvar matchStartNode = startPortion.node;\n\t\t\tvar matchEndNode = endPortion.node;\n\n\t\t\tvar precedingTextNode;\n\t\t\tvar followingTextNode;\n\n\t\t\tif (matchStartNode === matchEndNode) {\n\n\t\t\t\tvar node = matchStartNode;\n\n\t\t\t\tif (startPortion.indexInNode > 0) {\n\t\t\t\t\t// Add `before` text node (before the match)\n\t\t\t\t\tprecedingTextNode = doc.createTextNode(node.data.substring(0, startPortion.indexInNode));\n\t\t\t\t\tnode.parentNode.insertBefore(precedingTextNode, node);\n\t\t\t\t}\n\n\t\t\t\t// Create the replacement node:\n\t\t\t\tvar newNode = this.getPortionReplacementNode(\n\t\t\t\t\tendPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tnode.parentNode.insertBefore(newNode, node);\n\n\t\t\t\tif (endPortion.endIndexInNode < node.length) { // ?????\n\t\t\t\t\t// Add `after` text node (after the match)\n\t\t\t\t\tfollowingTextNode = doc.createTextNode(node.data.substring(endPortion.endIndexInNode));\n\t\t\t\t\tnode.parentNode.insertBefore(followingTextNode, node);\n\t\t\t\t}\n\n\t\t\t\tnode.parentNode.removeChild(node);\n\n\t\t\t\tthis.reverts.push(function() {\n\t\t\t\t\tif (precedingTextNode === newNode.previousSibling) {\n\t\t\t\t\t\tprecedingTextNode.parentNode.removeChild(precedingTextNode);\n\t\t\t\t\t}\n\t\t\t\t\tif (followingTextNode === newNode.nextSibling) {\n\t\t\t\t\t\tfollowingTextNode.parentNode.removeChild(followingTextNode);\n\t\t\t\t\t}\n\t\t\t\t\tnewNode.parentNode.replaceChild(node, newNode);\n\t\t\t\t});\n\n\t\t\t\treturn newNode;\n\n\t\t\t} else {\n\t\t\t\t// Replace matchStartNode -> [innerMatchNodes...] -> matchEndNode (in that order)\n\n\n\t\t\t\tprecedingTextNode = doc.createTextNode(\n\t\t\t\t\tmatchStartNode.data.substring(0, startPortion.indexInNode)\n\t\t\t\t);\n\n\t\t\t\tfollowingTextNode = doc.createTextNode(\n\t\t\t\t\tmatchEndNode.data.substring(endPortion.endIndexInNode)\n\t\t\t\t);\n\n\t\t\t\tvar firstNode = this.getPortionReplacementNode(\n\t\t\t\t\tstartPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tvar innerNodes = [];\n\n\t\t\t\tfor (var i = 0, l = innerPortions.length; i < l; ++i) {\n\t\t\t\t\tvar portion = innerPortions[i];\n\t\t\t\t\tvar innerNode = this.getPortionReplacementNode(\n\t\t\t\t\t\tportion,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t);\n\t\t\t\t\tportion.node.parentNode.replaceChild(innerNode, portion.node);\n\t\t\t\t\tthis.reverts.push((function(portion, innerNode) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tinnerNode.parentNode.replaceChild(portion.node, innerNode);\n\t\t\t\t\t\t};\n\t\t\t\t\t}(portion, innerNode)));\n\t\t\t\t\tinnerNodes.push(innerNode);\n\t\t\t\t}\n\n\t\t\t\tvar lastNode = this.getPortionReplacementNode(\n\t\t\t\t\tendPortion,\n\t\t\t\t\tmatch\n\t\t\t\t);\n\n\t\t\t\tmatchStartNode.parentNode.insertBefore(precedingTextNode, matchStartNode);\n\t\t\t\tmatchStartNode.parentNode.insertBefore(firstNode, matchStartNode);\n\t\t\t\tmatchStartNode.parentNode.removeChild(matchStartNode);\n\n\t\t\t\tmatchEndNode.parentNode.insertBefore(lastNode, matchEndNode);\n\t\t\t\tmatchEndNode.parentNode.insertBefore(followingTextNode, matchEndNode);\n\t\t\t\tmatchEndNode.parentNode.removeChild(matchEndNode);\n\n\t\t\t\tthis.reverts.push(function() {\n\t\t\t\t\tprecedingTextNode.parentNode.removeChild(precedingTextNode);\n\t\t\t\t\tfirstNode.parentNode.replaceChild(matchStartNode, firstNode);\n\t\t\t\t\tfollowingTextNode.parentNode.removeChild(followingTextNode);\n\t\t\t\t\tlastNode.parentNode.replaceChild(matchEndNode, lastNode);\n\t\t\t\t});\n\n\t\t\t\treturn lastNode;\n\t\t\t}\n\t\t}\n\n\t};\n\n\treturn exposed;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/findandreplacedomtext/src/findAndReplaceDOMText.js\n// module id = 16\n// module chunks = 1","import React from 'react';\n\nexport default class Toolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.clickKnown = this.clickKnown.bind(this);\n  }\n  clickKnown() {\n    console.log(this.props);\n    this.props.actions.actionUpdateKnownWord(this.props.word);\n  }\n  render() {\n    // const clickKnown = this.clickKnown.bind(this);\n    return (\n      <div>\n        <span onClick={this.clickKnown}>Known</span>\n        <span disabled title=\"The feature is not available yet\">Definition</span>\n        <span disabled title=\"The feature is not available yet\">Collocation</span>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/toolbar.component.jsx","module.exports = (__webpack_require__(9))(77);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react-dom/index.js from dll-reference standard\n// module id = 25\n// module chunks = 1","import findAndReplaceDOMText from 'findandreplacedomtext';\n// import isUndefined from 'lodash/isUndefined';\nimport { getSync } from '../common/storage';\nimport { info } from '../common/log';\nimport { addMessageListener } from '../common/communication';\nimport {\n  mouseenterHandler,\n  mouseleaveHandler,\n} from './event-handlers';\nimport {\n  EVENT_BROWSER_ACTION_CLICK,\n} from '../const/events';\nimport {\n  CLASS_UNKNOWN_WORD,\n  CLASS_KNOWN_WORD,\n  CLASS_WORD,\n  PROP_WORD,\n} from '../const/class-name';\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n});\n\n\nconst knownListMap = {};\nlet wordListMap = null;\nlet wordListRegExp = null;\n\nasync function highlight() {\n  let count = 0;\n  findAndReplaceDOMText(document.body, {\n    find: wordListRegExp,\n    replace: (s) => {\n      count += 1;\n      const replacementNode = document.createElement('span');\n      const textNode = document.createTextNode(s.text);\n      const word = s.text.toLowerCase();\n      replacementNode.appendChild(textNode);\n      replacementNode.classList.add(CLASS_WORD);\n      if (knownListMap[word]) {\n        replacementNode.classList.add(CLASS_KNOWN_WORD);\n      } else {\n        replacementNode.classList.add(CLASS_UNKNOWN_WORD);\n      }\n      replacementNode.setAttribute(PROP_WORD, word);\n\n      replacementNode.addEventListener('mouseenter', mouseenterHandler.bind(null, word, replacementNode));\n      replacementNode.addEventListener('mouseleave', mouseleaveHandler.bind(null, word, replacementNode));\n      return replacementNode;\n    },\n  });\n  info(`Matched ${count} words`);\n}\n\nasync function active({ wordList }) {\n  require('./style.less');\n  const allKnownList = await getSync('knownList');\n  const knownList = allKnownList[wordList.id];\n  if (knownList) {\n    knownList.forEach((knownWord) => {\n      knownListMap[knownWord.word.toLowerCase()] = knownWord;\n    });\n  }\n  if (wordListMap === null) {\n    wordListMap = {};\n    const words = [];\n    wordList.list.forEach((word) => {\n      wordListMap[word.word] = word;\n      words.push(word.word);\n    });\n    wordListRegExp = new RegExp(`\\\\b(${words.join('|')})\\\\b`, 'gi');\n  }\n  info('active');\n\n  highlight();\n}\n\nfunction addListener() {\n  addMessageListener((msg, sender, sendResponse) => {\n    if (msg.event && msg.event === EVENT_BROWSER_ACTION_CLICK) {\n      const wordList = msg.wordList;\n      active({ wordList });\n    }\n    sendResponse({});\n  });\n}\n\naddListener();\n\ninfo('CW_Content');\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/index.js","import {\n  removeProgressBar,\n  showProgressBar,\n  showToolbar,\n  hideToolbar,\n} from './actions';\n\nimport {\n  CLASS_UNKNOWN_WORD,\n} from '../const/class-name';\n\nimport {\n  THRESHOLD_TOOLBAR_SHOW,\n} from '../const/configuration';\n\nexport function mouseenterHandler(word, replacementNode, event) {\n  const targetNode = event.target;\n  if (targetNode !== replacementNode) return;\n  if (!targetNode.classList.contains(CLASS_UNKNOWN_WORD)) return;\n  clearTimeout(targetNode.attributes.leaveTO);\n  clearTimeout(targetNode.attributes.enterTO);\n  if (targetNode.attributes.isToolbarShow !== true) {\n    showProgressBar({ targetNode });\n  }\n  targetNode.attributes.enterTO = setTimeout(showToolbar.bind(null, { word, targetNode, event })\n                                                                      , THRESHOLD_TOOLBAR_SHOW);\n}\n\nexport function mouseleaveHandler(word, targetNode, event) {\n  if (!targetNode.classList.contains(CLASS_UNKNOWN_WORD)) return;\n  clearTimeout(targetNode.attributes.leaveTO);\n  clearTimeout(targetNode.attributes.enterTO);\n  removeProgressBar({ targetNode });\n  targetNode.attributes.leaveTO = setTimeout(hideToolbar.bind(null, { word, targetNode, event })\n                                                                                        , 1000);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/event-handlers.js"],"sourceRoot":""}